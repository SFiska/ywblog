[{"title":"æ–‡ä»¶ç®¡ç†å’ŒIOé‡å®šå‘","url":"/posts/43d26e1b/","content":"\n<meta name=\"referrer\" content=\"no-referrer\"/>\n\n# æ–‡ä»¶ç®¡ç†å’ŒIOé‡å®šå‘\n\n**å†…å®¹æ¦‚è¿°:**\n\n**æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„**\n\n**åˆ›å»ºå’ŒæŸ¥çœ‹æ–‡ä»¶**\n\n**å¤åˆ¶ã€è½¬ç§»å’Œåˆ é™¤æ–‡ä»¶**\n\n**è½¯å’Œç¡¬é“¾æ¥**\n\n**IOé‡å®šå‘å’Œç®¡é“**\n\n## **æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„**\n\n![image-20250702131615108](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702131615108.png)\n\n### **æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„**\n\næ–‡ä»¶å’Œç›®å½•è¢«ç»„ç»‡æˆä¸€ä¸ª`å•æ ¹`å€’ç½®æ ‘ç»“æ„\n\næ–‡ä»¶ç³»ç»Ÿä»æ ¹ç›®å½•ä¸‹å¼€å§‹ï¼Œç”¨â€œ`/`â€è¡¨ç¤º\n\næ ¹æ–‡ä»¶ç³»ç»Ÿ(rootfs)ï¼šroot filesystem\n\næ ‡å‡†Linuxæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ï¼š`ext4`ï¼‰ï¼Œæ–‡ä»¶åç§°å¤§å°å†™æ•æ„Ÿï¼Œä¾‹å¦‚ï¼šMAIL, Mail, mail, mAiL\n\nä»¥ `.` å¼€å¤´çš„æ–‡ä»¶ä¸ºéšè—æ–‡ä»¶\n\nè·¯å¾„åˆ†éš”çš„ `/`\n\næ–‡ä»¶åæœ€é•¿255ä¸ªå­—èŠ‚\n\nåŒ…æ‹¬è·¯å¾„åœ¨å†…æ–‡ä»¶åç§°æœ€é•¿4095ä¸ªå­—èŠ‚\n\n`è“è‰²-->ç›®å½•` `ç»¿è‰²-->å¯æ‰§è¡Œæ–‡ä»¶` `çº¢è‰²-->å‹ç¼©æ–‡ä»¶` `æµ…è“è‰²-->é“¾æ¥æ–‡ä»¶` `ç°è‰²-->å…¶ä»–æ–‡ä»¶`\n\né™¤äº†æ–œæ å’ŒNUL,æ‰€æœ‰å­—ç¬¦éƒ½æœ‰æ•ˆ.ä½†ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•åå’Œæ–‡ä»¶ä¸æ¨èä½¿ç”¨ï¼Œæœ‰äº›å­—ç¬¦éœ€è¦ç”¨å¼•å·æ¥å¼•ç”¨\n\næ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸¤ç±»ç›¸å…³æ•°æ®ï¼šå…ƒæ•°æ®ï¼šmetadataï¼Œå³å±æ€§ï¼Œ æ•°æ®ï¼šdataï¼Œå³æ–‡ä»¶å†…å®¹\n\nLinuxçš„æ–‡ä»¶ç³»ç»Ÿåˆ†å±‚ç»“æ„ï¼šFHS Filesystem Hierarchy Standard\n\n### **å¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•åŠŸèƒ½**\n\n`/boot`ï¼šå¼•å¯¼æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œå†…æ ¸æ–‡ä»¶(vmlinuz)ã€å¼•å¯¼åŠ è½½å™¨(bootloader, grub)éƒ½å­˜æ”¾äºæ­¤ç›®å½•\n\n`/bin`ï¼šæ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼›ä¸èƒ½å…³è”è‡³ç‹¬ç«‹åˆ†åŒºï¼ŒOSå¯åŠ¨å³ä¼šç”¨åˆ°çš„ç¨‹åº\n\n`/sbin`ï¼šç®¡ç†ç±»çš„åŸºæœ¬å‘½ä»¤ï¼›ä¸èƒ½å…³è”è‡³ç‹¬ç«‹åˆ†åŒºï¼ŒOSå¯åŠ¨å³ä¼šç”¨åˆ°çš„ç¨‹åº\n\n`/lib`ï¼šå¯åŠ¨æ—¶ç¨‹åºä¾èµ–çš„åŸºæœ¬å…±äº«åº“æ–‡ä»¶ä»¥åŠå†…æ ¸æ¨¡å—æ–‡ä»¶(/lib/modules)\n\n`/lib64`ï¼šä¸“ç”¨äºx86_64ç³»ç»Ÿä¸Šçš„è¾…åŠ©å…±äº«åº“æ–‡ä»¶å­˜æ”¾ä½ç½®\n\n`/etc`ï¼šé…ç½®æ–‡ä»¶ç›®å½•\n\n`/home/USERNAME`ï¼šæ™®é€šç”¨æˆ·å®¶ç›®å½•\n\n`/root`ï¼šç®¡ç†å‘˜çš„å®¶ç›®å½•\n\n`/media`ï¼šä¾¿æºå¼ç§»åŠ¨è®¾å¤‡æŒ‚è½½ç‚¹\n\n`/mnt`ï¼šä¸´æ—¶æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹\n\n`/dev`ï¼šè®¾å¤‡æ–‡ä»¶åŠç‰¹æ®Šæ–‡ä»¶å­˜å‚¨ä½ç½®\n\n   b: block deviceï¼Œéšæœºè®¿é—®\n\n   c: character deviceï¼Œçº¿æ€§è®¿é—®\n\n`/opt`ï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½®\n\n`/srv`ï¼šç³»ç»Ÿä¸Šè¿è¡Œçš„æœåŠ¡ç”¨åˆ°çš„æ•°æ®\n\n`/tmp`ï¼šä¸´æ—¶æ–‡ä»¶å­˜å‚¨ä½ç½®\n\n`/usr`: universal shared, read-only data\n\n   bin: ä¿è¯ç³»ç»Ÿæ‹¥æœ‰å®Œæ•´åŠŸèƒ½è€Œæä¾›çš„åº”ç”¨ç¨‹åº\n\n   sbin:\n\n   libï¼š32ä½ä½¿ç”¨\n\n   lib64ï¼šåªå­˜åœ¨64ä½ç³»ç»Ÿ\n\n   include: Cç¨‹åºçš„å¤´æ–‡ä»¶(header files)\n\n   shareï¼šç»“æ„åŒ–ç‹¬ç«‹çš„æ•°æ®ï¼Œä¾‹å¦‚doc, manç­‰\n\nâ€‹      localï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½®\n\nâ€‹        bin, sbin, lib, lib64, etc, share\n\n`/var`: variable data files\n\n   cache: åº”ç”¨ç¨‹åºç¼“å­˜æ•°æ®ç›®å½•\n\n   lib: åº”ç”¨ç¨‹åºçŠ¶æ€ä¿¡æ¯æ•°æ®\n\n   localï¼šä¸“ç”¨äºä¸º/usr/localä¸‹çš„åº”ç”¨ç¨‹åºå­˜å‚¨å¯å˜æ•°æ®\n\n   lock: é”æ–‡ä»¶\n\n   log: æ—¥å¿—ç›®å½•åŠæ–‡ä»¶\n\n   opt: ä¸“ç”¨äºä¸º/optä¸‹çš„åº”ç”¨ç¨‹åºå­˜å‚¨å¯å˜æ•°æ®\n\n   run: è¿è¡Œä¸­çš„è¿›ç¨‹ç›¸å…³æ•°æ®,é€šå¸¸ç”¨äºå­˜å‚¨è¿›ç¨‹pidæ–‡ä»¶\n\n   spool: åº”ç”¨ç¨‹åºæ•°æ®æ± \n\n   tmp: ä¿å­˜ç³»ç»Ÿä¸¤æ¬¡é‡å¯ä¹‹é—´äº§ç”Ÿçš„ä¸´æ—¶æ•°æ®\n\n`/proc`: ç”¨äºè¾“å‡ºå†…æ ¸ä¸è¿›ç¨‹ä¿¡æ¯ç›¸å…³çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ\n\n`/sysï¼š`ç”¨äºè¾“å‡ºå½“å‰ç³»ç»Ÿä¸Šç¡¬ä»¶è®¾å¤‡ç›¸å…³ä¿¡æ¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ\n\n`/selinux`: security enhanced Linuxï¼Œselinuxç›¸å…³çš„å®‰å…¨ç­–ç•¥ç­‰ä¿¡æ¯çš„å­˜å‚¨ä½ç½®\n\n### **åº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†**\n\näºŒè¿›åˆ¶ç¨‹åºï¼š/bin, /sbin, /usr/bin, /usr/sbin, /usr/local/bin, /usr/local/sbin\n\nåº“æ–‡ä»¶ï¼š/lib, /lib64, /usr/lib, /usr/lib64, /usr/local/lib, /usr/local/lib64\n\né…ç½®æ–‡ä»¶ï¼š/etc, /etc/DIRECTORY, /usr/local/etc\n\nå¸®åŠ©æ–‡ä»¶ï¼š/usr/share/man, /usr/share/doc, /usr/local/share/man, \n\n/usr/local/share/doc\n\n### Linuxä¸‹çš„æ–‡ä»¶ç±»å‹\n\n`-` æ™®é€šæ–‡ä»¶\n`d` ç›®å½•æ–‡ä»¶directory\n`l` ç¬¦å·é“¾æ¥æ–‡ä»¶link\n`b` å—è®¾å¤‡block \n`c` å­—ç¬¦è®¾å¤‡character\n`p` ç®¡é“æ–‡ä»¶pipe\n`s` å¥—æ¥å­—æ–‡ä»¶socket\n\n```bash\n[root@centos7 ~]#ls -l /run/\ndrwxr-xr-x 2 root      root      100 Dec 9 20:41 abrt\n-rw------- 1 root      root       11 Dec 9 20:41 alsactl.pid\nprw------- 1 root      root       0 Dec 9 20:41 autofs.fifo-net\nsrw-rw-rw- 1 root      root       0 Dec 9 20:41 gssproxy.sock\n```\n\n## **æ–‡ä»¶æ“ä½œå‘½ä»¤**\n\n### **æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•**\n\næ¯ä¸ªshellå’Œç³»ç»Ÿè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå½“å‰çš„å·¥ä½œç›®å½• CWDï¼šcurrent work directory\n\næ˜¾ç¤ºå½“å‰shell CWDçš„ç»å¯¹è·¯å¾„\n\n`pwd`å‘½ä»¤: printing working directory\n\n-P æ˜¾ç¤ºçœŸå®ç‰©ç†è·¯å¾„\n\n-L æ˜¾ç¤ºé“¾æ¥è·¯å¾„ï¼ˆé»˜è®¤ï¼‰\n\n### **ç»å¯¹å’Œç›¸å¯¹è·¯å¾„**\n\nç»å¯¹è·¯å¾„\n\n  ä»¥æ­£æ–œæ / å³æ ¹ç›®å½•å¼€å§‹\n\n  å®Œæ•´çš„æ–‡ä»¶çš„ä½ç½®è·¯å¾„\n\n  å¯ç”¨äºä»»ä½•æƒ³æŒ‡å®šä¸€ä¸ªæ–‡ä»¶åçš„æ—¶å€™\n\nç›¸å¯¹è·¯å¾„å\n\n  ä¸ä»¥æ–œçº¿å¼€å§‹\n\n  ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ˜¯æŒ‡ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ï¼Œç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæ˜¯ç›¸å¯¹äºæŸç›®å½•çš„ä½ç½®\n\n  å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€çŸ­çš„å½¢å¼æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å\n\nåŸºåï¼šbasenameï¼Œåªå–æ–‡ä»¶åè€Œä¸è¦è·¯å¾„\n\nç›®å½•åï¼šdirnameï¼Œåªå–è·¯å¾„ï¼Œä¸è¦æ–‡ä»¶å\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 bin]#basename /etc/sysconfig/network\nnetwork\n[root@centos8 bin]#dirname /etc/sysconfig/network\n/etc/sysconfig\n[root@centos8 ~]#dirname /etc/sysconfig/network-scripts/ifcfg-eth0\n/etc/sysconfig/network-scripts\n[root@centos8 ~]#basename /etc/sysconfig/network-scripts/ifcfg-eth0\nifcfg-eth0\n\n[root@ubuntu2004 ~]#basename http://nginx.org/download/nginx-1.18.0.tar.gz\nnginx-1.18.0.tar.gz\n[root@ubuntu2004 ~]#basename http://nginx.org/download/nginx-1.18.0.tar.gz \n.tar.gz\nnginx-1.18.0\n[root@ubuntu2004 ~]#basename -s .tar.gz http://nginx.org/download/nginx-\n1.18.0.tar.gz \nnginx-1.18.0\n[root@ubuntu2004 ~]#url=http://nginx.org/download/nginx-1.18.0.tar.gz\n[root@ubuntu2004 ~]#echo $url\nhttp://nginx.org/download/nginx-1.18.0.tar.gz\n[root@ubuntu2004 ~]#basename $url\nnginx-1.18.0.tar.gz\n```\n\n### **æ›´æ”¹ç›®å½•**\n\nå‘½ä»¤ cd ï¼š change directory æ”¹å˜ç›®å½•\n\né€‰é¡¹ï¼š-P åˆ‡æ¢è‡³ç‰©ç†è·¯å¾„ï¼Œè€Œéè½¯é“¾æ¥ç›®å½•\n\nå¯ä»¥ä½¿ç”¨ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„\n\nåˆ‡æ¢è‡³çˆ¶ç›®å½•ï¼š cd ..\n\nåˆ‡æ¢è‡³å½“å‰ç”¨æˆ·ä¸»ç›®å½•ï¼š cd\n\nåˆ‡æ¢è‡³ä»¥å‰çš„å·¥ä½œç›®å½•ï¼š cd -\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#cd /etc/sysconfig\n[root@centos8 sysconfig]#pwd\n/etc/sysconfig\n[root@centos8 sysconfig]#cd ../../data\n[root@centos8 data]#pwd\n/data\n[root@centos8 data]#cd /bin\n[root@centos8 bin]#pwd\n/bin\n[root@centos8 bin]#cd -P /bin \n[root@centos8 bin]#pwd\n/usr/bin\n```\n\nç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼š\n\nPWDï¼šå½“å‰ç›®å½•è·¯å¾„\n\nOLDPWDï¼šä¸Šä¸€æ¬¡ç›®å½•è·¯å¾„\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#echo $OLDPWD\n/etc/sysconfig\n[root@centos8 ~]#cd -\n/etc/sysconfig\n[root@centos8 sysconfig]#pwd\n/etc/sysconfig\n[root@centos8 sysconfig]#\n```\n\n### **åˆ—å‡ºç›®å½•å†…å®¹**\n\nls å‘½ä»¤å¯ä»¥åˆ—å‡ºå½“å‰ç›®å½•çš„å†…å®¹æˆ–æŒ‡å®šç›®å½•\n\nç”¨æ³•ï¼š\n\n```bash\nls [options] [files_or_dirs]\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-a åŒ…å«éšè—æ–‡ä»¶\n-l æ˜¾ç¤ºé¢å¤–çš„ä¿¡æ¯\n-R ç›®å½•é€’å½’\n-ld ç›®å½•å’Œç¬¦å·é“¾æ¥ä¿¡æ¯\n-1 æ–‡ä»¶åˆ†è¡Œæ˜¾ç¤º\n-S æŒ‰ä»å¤§åˆ°å°æ’åº\n-t æŒ‰mtimeæ’åº\n-u é…åˆ-té€‰é¡¹ï¼Œæ˜¾ç¤ºå¹¶æŒ‰atimeä»æ–°åˆ°æ—§æ’åº\n-U æŒ‰ç›®å½•å­˜æ”¾é¡ºåºæ˜¾ç¤º\n-X æŒ‰æ–‡ä»¶åç¼€æ’åº\n-F å¯¹ä¸åŒç±»å‹æ–‡ä»¶æ˜¾ç¤ºæ—¶é™„åŠ ä¸åŒçš„ç¬¦å·ï¼š*/=>@|\n-C æ–‡ä»¶å¤šæ—¶ï¼Œä»¥å¤šåˆ—çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¸€åˆ—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰\n```\n\n> ls æŸ¥çœ‹ä¸åŒåç¼€æ–‡ä»¶æ—¶çš„é¢œè‰²ç”± /etc/DIR_COLORS å’Œ@LS_COLORSå˜é‡å®šä¹‰\n>\n> ls -l çœ‹åˆ°æ–‡ä»¶çš„å¤§å°,ä¸ä¸€å®šæ˜¯å®é™…æ–‡ä»¶çœŸæ­£å ç”¨ç©ºé—´çš„å¤§å°\n\n```bash\n[root@centos8 ~]#vim /etc/DIR_COLORS\n.jpg 01;31 #ä¿®æ”¹æ­¤è¡Œ\n[root@centos8 ~]#exit \n[root@centos8 ~]#echo $LS_COLORS\nrs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:\nor=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44\n:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;3\n1:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z\n=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=\n01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.t\nbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31\n:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=0\n1;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jp\ng=01;31:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01\n;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.ti\nff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;3\n5:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp\n4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:\n*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01\n;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=\n01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.m4a=01;36:*.\nmid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;3\n6:*.wav=01;36:*.oga=01;36:*.opus=01;36:*.spx=01;36:*.xspf=01;36:\n```\n\nèŒƒä¾‹ï¼šåˆ«åll\n\n```bash\n[root@centos8 ~]#alias ll\nalias ll='ls -l --color=auto'\n[root@ubuntu ~]#alias ll\nalias ll='ls -alF'\n```\n\n### **æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€** **stat**\n\næ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼šmetadata, data\n\næ¯ä¸ªæ–‡ä»¶æœ‰ä¸‰ä¸ªæ—¶é—´æˆ³ï¼š\n\naccess time è®¿é—®æ—¶é—´ï¼Œatimeï¼Œè¯»å–æ–‡ä»¶å†…å®¹\n\nmodify time ä¿®æ”¹æ—¶é—´ï¼Œmtimeï¼Œæ”¹å˜æ–‡ä»¶å†…å®¹ï¼ˆæ•°æ®ï¼‰\n\nchange time æ”¹å˜æ—¶é—´ï¼Œctimeï¼Œå…ƒæ•°æ®å‘ç”Ÿæ”¹å˜\n\n```bash\n[root@centos8 ~]#stat /etc/passwd\n File: /etc/passwd\n Size: 1306   Blocks: 8     IO Block: 4096  regular file\nDevice: 802h/2050d Inode: 134792556  Links: 1\nAccess: (0644/-rw-r--r--) Uid: (  0/  root)  Gid: (  0/  root)\nAccess: 2019-12-09 20:37:12.830991350 +0800\nModify: 2019-12-09 20:37:12.826991351 +0800\nChange: 2019-12-09 20:37:12.826991351 +0800\n Birth: -\n```\n\n### **ç¡®å®šæ–‡ä»¶å†…å®¹**\n\næ–‡ä»¶å¯ä»¥åŒ…å«å¤šç§ç±»å‹çš„æ•°æ®ï¼Œä½¿ç”¨fileå‘½ä»¤æ£€æŸ¥æ–‡ä»¶çš„ç±»å‹ï¼Œç„¶åç¡®å®šé€‚å½“çš„æ‰“å¼€å‘½ä»¤æˆ–åº”ç”¨ç¨‹åºä½¿ç”¨\n\næ ¼å¼ï¼š\n\n```bash\nfile [options] <filename>...\n```\n\nå¸¸ç”¨é€‰é¡¹:\n\n```bash\n-b åˆ—å‡ºæ–‡ä»¶è¾¨è¯†ç»“æœæ—¶ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶åç§°\n-f filelist åˆ—å‡ºæ–‡ä»¶filelistä¸­æ–‡ä»¶åçš„æ–‡ä»¶ç±»å‹\n-F ä½¿ç”¨æŒ‡å®šåˆ†éš”ç¬¦å·æ›¿æ¢è¾“å‡ºæ–‡ä»¶ååé»˜è®¤çš„â€:â€åˆ†éš”ç¬¦\n-L æŸ¥çœ‹å¯¹åº”è½¯é“¾æ¥å¯¹åº”æ–‡ä»¶çš„æ–‡ä»¶ç±»å‹\n--help æ˜¾ç¤ºå‘½ä»¤åœ¨çº¿å¸®åŠ©\n```\n\nèŒƒä¾‹ï¼šwindowsçš„æ–‡æœ¬æ ¼å¼å’ŒLinuxçš„æ–‡æœ¬æ ¼å¼çš„åŒºåˆ«\n\n```bash\n[root@centos8 data]#cat linux.txt\na\nb\nc\n[root@centos8 data]#cat win.txt\na\nb\nc\n[root@centos8 data]#file win.txt linux.txt\nwin.txt:  ASCII text, with CRLF line terminators\nlinux.txt: ASCII text\n[root@centos8 data]#hexdump -C linux.txt\n00000000 61 0a 62 0a 63 0a                 |a.b.c.|\n00000006\n[root@centos8 data]#hexdump -C win.txt\n00000000 61 0d 0a 62 0d 0a 63               |a..b..c|\n00000007\n#å®‰è£…è½¬æ¢å·¥å…·\n[root@centos8 data]#dnf -y install dos2unix\n#å°†Windowsçš„æ–‡æœ¬æ ¼å¼è½¬æ¢æˆçš„Linuxæ–‡æœ¬æ ¼å¼\n[root@centos8 data]#dos2unix win.txt\ndos2unix: converting file win.txt to Unix format...\n[root@centos8 data]#file win.txt\nwin.txt: ASCII text\n#å°†Linuxçš„æ–‡æœ¬æ ¼å¼è½¬æ¢æˆWindowsçš„æ–‡æœ¬æ ¼å¼\n[root@centos8 data]#unix2dos win.txt\nunix2dos: converting file win.txt to DOS format...\n[root@centos8 data]#file win.txt\nwin.txt: ASCII text, with CRLF line terminators\n```\n\nèŒƒä¾‹ï¼šè½¬æ¢æ–‡ä»¶å­—ç¬¦é›†ç¼–ç \n\n```bash\n#æ˜¾ç¤ºæ”¯æŒå­—ç¬¦é›†ç¼–ç åˆ—è¡¨\n[root@centos8 ~]#iconv -l\n#windows7ä¸Šæ–‡æœ¬é»˜è®¤çš„ç¼–ç ANSIï¼ˆGB2312ï¼‰\n[root@centos8 data]#file windows.txt\nwindows.txt: ISO-8859 text, with no line terminators\n[root@centos8 data]#echo $LANG\nen_US.UTF-8\n#é»˜è®¤åœ¨linuxæ— æ³•æ­£å¸¸æ˜¾ç¤ºæ–‡æœ¬å†…å®¹\n[root@centos8 data]#cat windows.txt\n[root@centos8 data]#\n#å°†windows7ä¸Šæ–‡æœ¬é»˜è®¤çš„ç¼–ç ANSIï¼ˆGB2312ï¼‰è½¬æ¢æˆUTF-8\n[root@centos8 data]#iconv -f gb2312 windows.txt -o windows1.txt\n[root@centos8 data]#cat windows1.txt\né©¬å“¥æ•™è‚²[root@centos8 data]#ll windows1.txt\n-rw-r--r-- 1 root root 12 Mar 23 10:13 windows1.txt\n[root@centos8 data]#file windows1.txt\nwindows1.txt: UTF-8 Unicode text, with no line terminators\n#å°†UTF-8è½¬æ¢æˆwindows10ä¸Šæ–‡æœ¬é»˜è®¤çš„ç¼–ç ANSIï¼ˆGB2312ï¼‰\n[root@centos8 data]#iconv -f utf8 -t gb2312 windows1.txt -o windows2.txt\n[root@centos8 data]#file windows2.txt\nwindows2.txt: ISO-8859 text, with no line terminators\n```\n\nèŒƒä¾‹:\n\n```bash\n[15:34:50 root@centos8 ~]#file linux.txt\nlinux.txt: ASCII text\n[15:34:31 root@centos8 ~]#file windows.txt \nwindows.txt: ASCII text, with CRLF line terminators\n#å°†windowsçš„æ–‡æœ¬æ ¼å¼è½¬æ¢æˆLinuxçš„æ–‡æœ¬æ ¼å¼\n[15:35:26 root@centos8 ~]#dos2unix windows.txt \ndos2unix: converting file windows.txt to Unix format...\n[15:36:00 root@centos8 ~]#file windows.txt\nwindows.txt: ASCII text\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#cat list.txt \n/etc/\n/bin\n/etc/issue\n[root@centos8 ~]#file -f list.txt\n/etc/:   directory\n/bin:    symbolic link to usr/bin\n/etc/issue: ASCII text\n```\n\n### ğŸŒŸæ–‡ä»¶é€šé…ç¬¦æ¨¡å¼wildcard pattern\n\næ–‡ä»¶é€šé…ç¬¦å¯ä»¥ç”¨æ¥åŒ¹é…ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿æ‰¹é‡ç®¡ç†æ–‡ä»¶\n\né€šé…ç¬¦é‡‡æœ‰ç‰¹å®šçš„ç¬¦å·ï¼Œè¡¨ç¤ºç‰¹å®šçš„å«ä¹‰ï¼Œæ­¤ç‰¹ç¬¦å·ç§°ä¸ºå…ƒ meta å­—ç¬¦\n\nå¸¸è§çš„é€šé…ç¬¦å¦‚ä¸‹ï¼š\n\n```bash\n* åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œä½†ä¸åŒ¹é… \".\" å¼€å¤´çš„æ–‡ä»¶ï¼Œå³éšè—æ–‡ä»¶\n? åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦,ä¸€ä¸ªæ±‰å­—ä¹Ÿç®—ä¸€ä¸ªå­—ç¬¦\n~ å½“å‰ç”¨æˆ·å®¶ç›®å½•\n~mage ç”¨æˆ·mageå®¶ç›®å½•\n[0-9] åŒ¹é…æ•°å­—èŒƒå›´\n[a-z] ä¸€ä¸ªå­—æ¯\n[A-Z] ä¸€ä¸ªå­—æ¯\n[wang] åŒ¹é…åˆ—è¡¨ä¸­çš„ä»»ä½•çš„ä¸€ä¸ªå­—ç¬¦\n[^wang] åŒ¹é…åˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ç¬¦ä»¥å¤–çš„å­—ç¬¦\n[^a-z] åŒ¹é…åˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ç¬¦ä»¥å¤–çš„å­—ç¬¦\n. å’Œ ~+ å½“å‰å·¥ä½œç›®å½•\n~-  å‰ä¸€ä¸ªå·¥ä½œç›®å½•\n```\n\nå¦å¤–è¿˜æœ‰åœ¨Linuxç³»ç»Ÿä¸­é¢„å®šä¹‰çš„å­—ç¬¦ç±»è¡¨ç¤ºæ³•å¦‚ä¸‹ï¼šman 7 glob\n\n```bash\n[:digit:]ï¼šä»»æ„æ•°å­—ï¼Œç›¸å½“äº0-9\n[:lower:]ï¼šä»»æ„å°å†™å­—æ¯,è¡¨ç¤º a-z\n[:upper:]: ä»»æ„å¤§å†™å­—æ¯,è¡¨ç¤º A-Z \n[:alpha:]: ä»»æ„å¤§å°å†™å­—æ¯\n[:alnum:]ï¼šä»»æ„æ•°å­—æˆ–å­—æ¯\n[:blank:]ï¼šæ°´å¹³ç©ºç™½å­—ç¬¦\n[:space:]ï¼šæ°´å¹³æˆ–å‚ç›´ç©ºç™½å­—ç¬¦\n[:punct:]ï¼šæ ‡ç‚¹ç¬¦å·\n[:print:]ï¼šå¯æ‰“å°å­—ç¬¦\n[:cntrl:]ï¼šæ§åˆ¶ï¼ˆéæ‰“å°ï¼‰å­—ç¬¦\n[:graph:]ï¼šå›¾å½¢å­—ç¬¦\n[:xdigit:]ï¼šåå…­è¿›åˆ¶å­—ç¬¦\n```\n\nèŒƒä¾‹: [ ] å’Œ { }\n\n```bash\n[root@centos8 data]#ll f{1..5}\nls: cannot access 'f1': No such file or directory\nls: cannot access 'f2': No such file or directory\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f3\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f4\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f5\n[root@centos8 data]#ll f[1-5]\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f3\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f4\n-rw-r--r-- 1 root root 0 Nov 7 09:34 f5\n[root@centos8 data]#ll f[a-c]\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fa\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fA\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fb\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fB\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fc\n[root@centos8 data]#ll f{a..c}\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fa\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fb\n-rw-r--r-- 1 root root 0 Nov 7 09:46 fc\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 data]#touch file{a..z}.txt file{A..Z}.txt file{0..9}.txt\n[root@centos8 data]#ll file{0..9}.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file0.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file1.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file2.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file3.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file4.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file5.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file6.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file7.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file8.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file9.txt\n[root@centos8 data]#ll file[0-9].txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file0.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file1.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file2.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file3.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file4.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file5.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file6.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file7.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file8.txt\n-rw-r--r-- 1 root root 0 Mar 23 10:46 file9.txt\n[root@centos8 data]#ls file[a-c].txt\nfilea.txt fileA.txt fileb.txt fileB.txt filec.txt\n[root@centos8 data]#ls file[C-E].txt\nfileC.txt filed.txt fileD.txt filee.txt fileE.txt\n[root@centos8 data]#ls file[wang].txt\nfilea.txt fileg.txt filen.txt filew.txt\n[root@centos8 data]#ls file[^wang].txt\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 data]#ls file[:lower:].txt\nfilee.txt filel.txt fileo.txt filer.txt filew.txt\n[root@centos8 data]#ls file[[:lower:]].txt\nfilea.txt filed.txt fileg.txt filej.txt filem.txt filep.txt files.txt \nfilev.txt filey.txt\nfileb.txt filee.txt fileh.txt filek.txt filen.txt fileq.txt filet.txt \nfilew.txt filez.txt\nfilec.txt filef.txt filei.txt filel.txt fileo.txt filer.txt fileu.txt \nfilex.txt\n```\n\nèŒƒä¾‹ï¼šæ¯”è¾ƒæœ‰æ— *çš„åŠŸèƒ½åŒºåˆ«\n\n```bash\n[root@centos8 data]#ls -a *\n[root@centos8 data]#ls -a\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#ls -d /etc/*/\n[root@centos8 ~]#l.\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 data]#touch file*.log\n[root@centos8 data]#touch file1.log\n[root@centos8 data]#ls file*.log\n file1.log 'file*.log'\n[root@centos8 data]#ls 'file*.log'\n'file*.log'\n[root@centos8 data]#ls 'file*.log'\n```\n\n### ç»ƒä¹ \n\n1ã€æ˜¾ç¤º/etcç›®å½•ä¸‹æ‰€æœ‰ä»¥lå¼€å¤´ï¼Œä»¥ä¸€ä¸ªå°å†™å­—æ¯ç»“å°¾ï¼Œä¸”ä¸­é—´å‡ºç°è‡³å°‘ä¸€ä½æ•°å­—çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ls -d /etc/l*[0-9]*[a-z]\n/etc/l123df21a\n[root@192 ~]# ls -d /etc/l*[0-9]*[[:lower:]]\n/etc/l123se123a\n```\n\n2ã€æ˜¾ç¤º/etcç›®å½•ä¸‹ä»¥ä»»æ„ä¸€ä½æ•°å­—å¼€å¤´ï¼Œä¸”ä»¥éæ•°å­—ç»“å°¾çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ls /etc/[0-9]*[^0-9] -d\n/etc/1aa\n```\n\n3ã€æ˜¾ç¤º/etc/ç›®å½•ä¸‹ä»¥éå­—æ¯å¼€å¤´ï¼Œåé¢è·Ÿäº†ä¸€ä¸ªå­—æ¯åŠå…¶å®ƒä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ll -d /etc/[^[:alpha:]][[:alpha:]]*\ndrwxr-xr-x 2 root root 4096 Jul  2 14:24 /etc/1aa\n```\n\n4ã€æ˜¾ç¤º/etc/ç›®å½•ä¸‹æ‰€æœ‰ä»¥rcå¼€å¤´ï¼Œå¹¶åé¢æ˜¯0-6ä¹‹é—´çš„æ•°å­—ï¼Œå…¶å®ƒä¸ºä»»æ„å­—ç¬¦çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ls /etc/rc[0-6]* -d\n/etc/rc0.d  /etc/rc1.d  /etc/rc2.d  /etc/rc3.d  /etc/rc4.d  /etc/rc5.d  /etc/rc6.d\n```\n\n5ã€æ˜¾ç¤º/etcç›®å½•ä¸‹ï¼Œæ‰€æœ‰.confç»“å°¾ï¼Œä¸”ä»¥m,n,r,på¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ls /etc/[m,n,r,p]*.conf\n/etc/man_db.conf  /etc/nfs.conf       /etc/nsswitch.conf     /etc/resolv.conf  /etc/rsyslog.conf\n/etc/mke2fs.conf  /etc/nfsmount.conf  /etc/request-key.conf  /etc/rsyncd.conf\n```\n\n6ã€åªæ˜¾ç¤º/rootä¸‹çš„éšè—æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ll -a .*\n-rw-------. 1 root root 1110 Dec  8  2024 .bash_history\n-rw-r--r--. 1 root root   18 May 10  2024 .bash_logout\n-rw-r--r--. 1 root root  176 May 10  2024 .bash_profile\n-rw-r--r--. 1 root root  176 May 10  2024 .bashrc\n-rw-r--r--. 1 root root  100 May 10  2024 .cshrc\n-rw-r--r--. 1 root root  129 May 10  2024 .tcshrc\n-rw-------. 1 root root 2646 Dec  8  2024 .viminfo\n\n.cache:\ntotal 8\ndrwx------  2 root root 4096 Dec  8  2024 .\ndr-xr-x---. 4 root root 4096 Dec  8  2024 ..\n\n.ssh:\ntotal 8\ndrwx------. 2 root root 4096 Dec  8  2024 .\ndr-xr-x---. 4 root root 4096 Dec  8  2024 ..\n```\n\n7ã€åªæ˜¾ç¤º/etcä¸‹çš„ééšè—ç›®å½•åˆ—è¡¨\n\n```bash\n[root@192 ~]# ls -d /etc/[^.]*\n/etc/1aa                      /etc/ipset                     /etc/protocols\n/etc/adjtime                  /etc/iscsi                     /etc/quotagrpadmins\n/etc/aliases                  /etc/isns                      /etc/quotatab\n/etc/alternatives             /etc/issue                     /etc/rc0.d\n/etc/anacrontab               /etc/issue.d                   /etc/rc1.d\n......\n```\n\n\n\n### **åˆ›å»ºç©ºæ–‡ä»¶å’Œåˆ·æ–°æ—¶é—´**\n\ntouchå‘½ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºç©ºæ–‡ä»¶æˆ–åˆ·æ–°æ–‡ä»¶çš„æ—¶é—´\n\n```bash\n-a ä»…æ”¹å˜ atimeå’Œctime\n-m ä»…æ”¹å˜ mtimeå’Œctime\n-t [[CC]YY]MMDDhhmm[.ss] æŒ‡å®šatimeå’Œmtimeçš„æ—¶é—´æˆ³\n-c å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¸äºˆåˆ›å»º\n```\n\nèŒƒä¾‹\n\n```bash\n[root@centos8 data]#touch f1.txt\n[root@centos8 data]#ll\ntotal 0\n-rw-r--r-- 1 root root 0 Mar 23 11:30 f1.txt\n[root@centos8 data]#ll /etc/issue\n-rw-r--r--. 1 root root 23 Jan 2 23:21 /etc/issue\n[root@centos8 data]#touch /etc/issue\n[root@centos8 data]#ll /etc/issue\n-rw-r--r--. 1 root root 23 Mar 23 11:31 /etc/issue\n[root@centos8 data]#stat /etc/issue\n File: /etc/issue\n Size: 23       Blocks: 8     IO Block: 4096  regular file\nDevice: 802h/2050d   Inode: 134345998  Links: 1\nAccess: (0644/-rw-r--r--) Uid: (  0/  root)  Gid: (  0/  root)\nAccess: 2020-03-23 11:31:20.030291332 +0800\nModify: 2020-03-23 11:31:20.030291332 +0800\nChange: 2020-03-23 11:31:20.030291332 +0800\n Birth: -\n[root@centos8 data]#date\nFri Dec 13 16:11:55 CST 2019\n[root@centos8 data]#touch `date -d \"-1 day\" +%F_%T`.log\n[root@centos8 data]#ls\n2019-12-12_16:11:48.log\n[root@centos8 data]#touch $(date -d \"1 year\" +%F_%T).log\n[root@centos8 data]#ls\n2019-12-12_16:11:48.log 2020-12-13_16:13:11.log\n```\n\n### **å¤åˆ¶æ–‡ä»¶å’Œç›®å½•**\n\nåˆ©ç”¨ cpï¼ˆcopyï¼‰å‘½ä»¤å¯ä»¥å®ç°æ–‡ä»¶æˆ–ç›®å½•çš„å¤åˆ¶\n\næ ¼å¼\n\n```bash\ncp [OPTION]... [-T] SOURCE DEST\ncp [OPTION]... SOURCE... DIRECTORY\ncp [OPTION]... -t DIRECTORY SOURCE...\n```\n\nå¸¸ç”¨é€‰é¡¹\n\n```bash\n-i å¦‚æœç›®æ ‡å·²å­˜åœ¨ï¼Œè¦†ç›–å‰æç¤ºæ˜¯å¦è¦†ç›– \n-n ä¸è¦†ç›–ï¼Œæ³¨æ„ä¸¤è€…é¡ºåº\n-r, -R é€’å½’å¤åˆ¶ç›®å½•åŠå†…éƒ¨çš„æ‰€æœ‰å†…å®¹\n-a å½’æ¡£ï¼Œç›¸å½“äº-dR --preserv=allï¼Œå¸¸ç”¨äºå¤‡ä»½åŠŸèƒ½\n-d --no-dereference --preserv=links ä¸å¤åˆ¶åŸæ–‡ä»¶ï¼Œåªå¤åˆ¶é“¾æ¥å\n--preserv[=ATTR_LIST\n  mode: æƒé™\n  ownership: å±ä¸»å±ç»„\n  timestamp:\n  links\n  xattr\n  context\n  all \n-p ç­‰åŒ--preserv=mode,ownership,timestamp\n-v --verbose\n-f --force\n-u --update åªå¤åˆ¶æºæ¯”ç›®æ ‡æ›´æ–°æ–‡ä»¶æˆ–ç›®æ ‡ä¸å­˜åœ¨çš„æ–‡ä»¶\n-b ç›®æ ‡å­˜åœ¨ï¼Œè¦†ç›–å‰å…ˆå¤‡ä»½ï¼Œé»˜è®¤å½¢å¼ä¸º filename~ ,åªä¿ç•™æœ€è¿‘çš„ä¸€ä¸ªå¤‡ä»½\n--backup=numbered ç›®æ ‡å­˜åœ¨ï¼Œè¦†ç›–å‰å…ˆå¤‡ä»½åŠ æ•°å­—åç¼€ï¼Œå½¢å¼ä¸º filename.~#~ ï¼Œå¯ä»¥ä¿ç•™å¤š\nä¸ªç‰ˆæœ¬\n```\n\n| æº \\ ç›®æ ‡                | ä¸å­˜åœ¨                                              | å­˜åœ¨ä¸”ä¸ºæ–‡ä»¶                                                 | å­˜åœ¨ä¸”ä¸ºç›®å½•                                                 |\n| ------------------------ | --------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ä¸€ä¸ªæ–‡ä»¶                 | æ–°å»ºDESTï¼Œå¹¶å°†SRCä¸­çš„å†…å®¹å¡«å……è‡³DESTä¸­               | å°†SRCä¸­çš„å†…å®¹è¦†ç›–è‡³DESTä¸­ï¼Œæ³¨æ„æ•°æ®ä¸¢å¤±é£é™©ï¼å»ºè®®ç”¨ `-i` é€‰é¡¹ | åœ¨DESTä¸‹æ–°å»ºä¸åŸæ–‡ä»¶åŒåçš„æ–‡ä»¶ï¼Œå¹¶å°†SRCä¸­å†…å®¹å¡«å……è‡³æ–°æ–‡ä»¶ä¸­  |\n| å¤šä¸ªæ–‡ä»¶                 | æç¤ºé”™è¯¯                                            | æç¤ºé”™è¯¯                                                     | åœ¨DESTä¸‹æ–°å»ºä¸åŸæ–‡ä»¶åŒåçš„æ–‡ä»¶ï¼Œå¹¶å°†åŸæ–‡ä»¶å†…å®¹å¤åˆ¶è¿›æ–°æ–‡ä»¶ä¸­ |\n| ç›®å½•ï¼ˆé¡»ä½¿ç”¨ `-r` é€‰é¡¹ï¼‰ | åˆ›å»ºæŒ‡å®šDESTåŒåç›®å½•ï¼Œå¤åˆ¶SRCç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶è‡³DESTä¸‹ | æç¤ºé”™è¯¯                                                     | åœ¨DESTä¸‹æ–°å»ºä¸åŸç›®å½•åŒåçš„ç›®å½•ï¼Œå¹¶å°†SRCä¸­å†…å®¹å¤åˆ¶è‡³æ–°ç›®å½•ä¸­  |\n\nèŒƒä¾‹:\n\n```bash\n[16:21:08 root@centos8 ~]#cp ~wang/issue /data/issue_wang.bak\n-rw-r--r--. 1 root root 86 Dec 13 16:21 /data/issue_wang.bak\n-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /home/wang/issue\n[16:21:44 root@centos8 ~]#cp -p ~wang/issue /data/issue_wang2.bak\n[16:22:07 root@centos8 ~]#ll ~wang/issue /data/issue_wang2.bak\n-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /data/issue_wang2.bak\n-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /home/wang/issue\n[16:23:19 root@centos8 ~]#cp /etc/sysconfig/ /data/\ncp: -r not specified; omitting directory '/etc/sysconfig/'\n[16:23:40 root@centos8 ~]#cp -r /etc/sysconfig/ /data/\n[16:23:45 root@centos8 ~]#ll /data\ntotal 12\n-rw-r--r--. 1 root root  0 Dec 13 16:11 2019-12-12_16:11:48.log\n-rw-r--r--. 1 root root  0 Dec 13 16:13 2020-12-13_16:13:11.log\n-rw-r--r--. 1 wang wang  86 Dec 13 16:18 issue_wang2.bak\n-rw-r--r--. 1 root root  86 Dec 13 16:21 issue_wang.bak\ndrwxr-xr-x. 7 root root 4096 Dec 13 16:23 sysconfig\n[16:24:03 root@centos8 ~]#cp -r /etc/sysconfig/ /data/sysconfig_bak\n[16:24:34 root@centos8 ~]#ll /data\ntotal 16\n-rw-r--r--. 1 root root  0 Dec 13 16:11 2019-12-12_16:11:48.log\n-rw-r--r--. 1 root root  0 Dec 13 16:13 2020-12-13_16:13:11.log\n-rw-r--r--. 1 wang wang  86 Dec 13 16:18 issue_wang2.bak\n-rw-r--r--. 1 root root  86 Dec 13 16:21 issue_wang.bak\ndrwxr-xr-x. 7 root root 4096 Dec 13 16:23 sysconfig\ndrwxr-xr-x. 7 root root 4096 Dec 13 16:24 sysconfig_bak\n\n#ç”¨{}è¿›è¡Œå¤‡ä»½\n[root@192 ~]# cp /etc/yum.repos.d/openEuler.repo{,.bak}\n[root@192 ~]# ll /etc/yum.repos.d/\ntotal 8\n-rw-r--r--. 1 root root 2095 Dec  8  2024 openEuler.repo\n-rw-r--r--  1 root root 2095 Jul  2 14:53 openEuler.repo.bak\n[root@192 ~]#\n\n```\n\n\n\nèŒƒä¾‹ï¼šå¤åˆ¶æ—¶å¦‚æœè¦†ç›–å…ˆå¤‡ä»½å†è¦†ç›–\n\n```bash\n[16:32:43 root@centos8 ~]#cp -b /etc/motd /data/issue\ncp: overwrite '/data/issue'? y \n[16:33:09 root@centos8 ~]#ll /data\ntotal 8\n-rw-r--r--. 1 root root  1 Dec 13 16:33 issue\n-rw-r--r--. 1 root root 2610 Dec 13 16:32 issue~\n[16:33:11 root@centos8 ~]#cp -b /etc/fstab /data/issue\ncp: overwrite '/data/issue'? y\n[16:33:55 root@centos8 ~]#ll /data\ntotal 8\n-rw-r--r--. 1 root root 709 Dec 13 16:33 issue\n-rw-r--r--. 1 root root  1 Dec 13 16:33 issue~\n[16:33:56 root@centos8 ~]#cp --backup=numbered  /etc/fstab /data/issue\ncp: overwrite '/data/issue'? y\n[16:34:32 root@centos8 ~]#cp --backup=numbered  /etc/shadow /data/issue\ncp: overwrite '/data/issue'? y\n[16:34:41 root@centos8 ~]#cp --backup=numbered  /etc/os-release /data/issue\ncp: overwrite '/data/issue'? y\n[16:34:48 root@centos8 ~]#ll /data\ntotal 20\n-rw-r--r--. 1 root root 420 Dec 13 16:34 issue\n-rw-r--r--. 1 root root  1 Dec 13 16:33 issue~\n-rw-r--r--. 1 root root 709 Dec 13 16:33 issue.~1~\n-rw-r--r--. 1 root root 709 Dec 13 16:34 issue.~2~\n----------. 1 root root 1349 Dec 13 16:34 issue.~3~\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#cp /dev/zero /data/zero.bak\n```\n\n**ç»ƒä¹ **\n\n1ã€æ¯å¤©å°†/etc/ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¤‡ä»½åˆ°/dataç‹¬ç«‹çš„å­ç›®å½•ä¸‹ï¼Œå¹¶è¦æ±‚å­ç›®å½•æ ¼å¼ä¸º backupYYYYmm-ddï¼Œå¤‡ä»½è¿‡ç¨‹å¯è§\n\n```bash\n[root@centos8 ~]#cp -av /etc/ /data/backup`date +%F`\n[root@centos8 ~]#cp -av /etc/ /data/etc-`date +%F_%H-%M-%S\n```\n\n2ã€åˆ›å»º/data/rootdirç›®å½•ï¼Œå¹¶å¤åˆ¶/rootä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°è¯¥ç›®å½•å†…ï¼Œè¦æ±‚ä¿ç•™åŸæœ‰æƒé™\n\n```bash\n[root@centos8 ~]#cp -a /root /data/rootdir\n```\n\n### **ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶**\n\n`mv å‘½ä»¤å¯ä»¥å®ç°æ–‡ä»¶æˆ–ç›®å½•çš„ç§»åŠ¨å’Œæ”¹å`\n\nåŒä¸€åˆ†åŒºç§»åŠ¨æ•°æ®,é€Ÿåº¦å¾ˆå¿«:æ•°æ®ä½ç½®æ²¡æœ‰å˜åŒ–\n\nä¸åŒåˆ†åŒºç§»åŠ¨æ•°æ®,é€Ÿåº¦ç›¸å¯¹æ…¢:æ•°æ®ä½ç½®å‘ç”Ÿäº†å˜åŒ–\n\næ ¼å¼ï¼š\n\n```bash\nmv [OPTION]... [-T] SOURCE DEST\nmv [OPTION]... SOURCE... DIRECTORY\nmv [OPTION]... -t DIRECTORY SOURCE...\n```\n\nå¸¸ç”¨é€‰é¡¹ï¼š\n\n-i äº¤äº’å¼\n\n-f å¼ºåˆ¶\n\n-b ç›®æ ‡å­˜åœ¨ï¼Œè¦†ç›–å‰å…ˆå¤‡ä»½\n\n`åˆ©ç”¨ rename å¯ä»¥æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å`\n\næ ¼å¼ï¼š\n\n```bash\nrename [options] <expression> <replacement> <file>...\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n#ä¸ºæ‰€æœ‰çš„få¼€å¤´åŒ…å«confçš„æ–‡ä»¶åŠ ä¸Š.bakåç¼€ï¼š\nrename 'conf'  'conf.bak'  f* \n#å»æ‰æ‰€æœ‰çš„bakåç¼€ï¼š\nrename '.bak' '' *.bak\n```\n\n### **åˆ é™¤æ–‡ä»¶**\n\n![image-20250702151212725](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702151212725.png)\n\nä½¿ç”¨ rm å‘½ä»¤å¯ä»¥åˆ é™¤æ–‡ä»¶å’Œç›®å½•\n\næ³¨æ„ï¼šæ­¤å‘½ä»¤éå¸¸å±é™©ï¼Œæ…é‡ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨ mv ä»£æ›¿ rm\n\næ ¼å¼ï¼š\n\n```bash\nrm [OPTION]... FILE...\n```\n\nå¸¸ç”¨é€‰é¡¹ï¼š\n\n```bash\n-i äº¤äº’å¼\n-f å¼ºåˆ¶åˆ é™¤\n-r é€’å½’\n--no-preserve-root åˆ é™¤/ \n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#rm -rf /\nrm: it is dangerous to operate recursively on '/'\nrm: use --no-preserve-root to override this failsafe\n#æ€è€ƒåˆ é™¤/ æ–‡ä»¶,å¦‚ä½•éªŒè¯ã€è°¨æ…æ“ä½œã€‘\n[root@centos8 ~]#rm -rf /*\n[root@centos8 ~]#/2TAB\n[root@centos8 ~]#echo *\n```\n\nèŒƒä¾‹ï¼š rm åˆ«å\n\n```bash\n[root@centos8 ~]#alias rm=\"echo è¯·ä½¿ç”¨mv\"\n```\n\nèŒƒä¾‹ï¼šåˆ é™¤ç‰¹æ®Šæ–‡ä»¶\n\n```bash\n[root@centos8 data]#rm ./-f\n[root@centos8 data]#rm /data/-f\n[root@centos8 data]#touch '~'\n[root@centos8 data]#ls\n'~'\n[root@centos8 data]#rm -f ~\nrm: cannot remove '/root': Is a directory\n[root@centos8 data]#rm -- ~\nrm: cannot remove '/root': Is a directory\n[root@centos8 data]#rm -f ./~\n```\n\nrm è™½ç„¶åˆ é™¤äº†æ–‡ä»¶ï¼Œä½†æ˜¯è¢«åˆ é™¤çš„æ–‡ä»¶ä»ç„¶å¯èƒ½è¢«æ¢å¤ï¼Œåœ¨å®‰å…¨è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨shredå®‰\n\nå…¨åˆ é™¤æ–‡ä»¶\n\n### **ç›®å½•æ“ä½œ**\n\n**æ˜¾ç¤ºç›®å½•æ ‘** **tree**\n\nå¸¸è§é€‰é¡¹ï¼š\n\n-d: åªæ˜¾ç¤ºç›®å½•\n\n-L levelï¼šæŒ‡å®šæ˜¾ç¤ºçš„å±‚çº§æ•°ç›®\n\n-P pattern: åªæ˜¾ç¤ºç”±æŒ‡å®šwild-card patternåŒ¹é…åˆ°çš„è·¯å¾„\n\n**åˆ›å»ºç›®å½•** **mkdir**\n\nå¸¸è§é€‰é¡¹ï¼š\n\n-p: å­˜åœ¨äºä¸æŠ¥é”™ï¼Œä¸”å¯è‡ªåŠ¨åˆ›å»ºæ‰€éœ€çš„å„ç›®å½•\n\n-v: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\n\n-m MODE: åˆ›å»ºç›®å½•æ—¶ç›´æ¥æŒ‡å®šæƒé™\n\n**åˆ é™¤ç©ºç›®å½•** **rmdir**\n\nå¸¸è§é€‰é¡¹ï¼š\n\n-p é€’å½’åˆ é™¤çˆ¶ç©ºç›®å½•\n\n-v æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\n\næ³¨æ„ï¼šrmdiråªèƒ½åˆ é™¤ç©ºç›®å½•ï¼Œå¦‚æœæƒ³åˆ é™¤éç©ºç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨rm -r å‘½ä»¤ï¼Œé€’å½’åˆ é™¤ç›®å½•æ ‘\n\nèŒƒä¾‹\n\n```bash\nalias rm='DIR=/data/backup`date +%F%T`;mkdir $DIR;mv -t $DIR'\n```\n\nç»ƒä¹ \n\n(1) å¦‚ä½•åˆ›å»º/testdir/dir1/x, /testdir/dir1/y, /testdir/dir1/x/a, /testdir/dir1/x/b, /testdir/dir1/y/a, /testdir/dir1/y/b\n\n```bash\nmkdir -p /testdir/dir1/{x,y}/{a,b}\n[root@192 ~]# ll /testdir/dir1/{x,y}\n/testdir/dir1/x:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jul  2 15:08 a\ndrwxr-xr-x 2 root root 4096 Jul  2 15:08 b\n\n/testdir/dir1/y:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jul  2 15:08 a\ndrwxr-xr-x 2 root root 4096 Jul  2 15:08 b\n[root@192 ~]#\n\n```\n\n(2) å¦‚ä½•åˆ›å»º/testdir/dir2/x, /testdir/dir2/y, /testdir/dir2/x/a, /testdir/dir2/x/b\n\n```bash\n[root@192 ~]# mkdir -p /testdir/dir2/{x,y} /testdir/dir2/x/{a,b}\n[root@192 ~]# ll /testdir/dir2/{x,y}\n/testdir/dir2/x:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jul  2 15:09 a\ndrwxr-xr-x 2 root root 4096 Jul  2 15:09 b\n\n/testdir/dir2/y:\ntotal 0\n```\n\n(3) å¦‚ä½•åˆ›å»º/testdir/dir3, /testdir/dir4, /testdir/dir5, /testdir/dir5/dir6, /testdir/dir5/dir7\n\n```bash\n[root@192 ~]# mkdir -p /testdir/dir{3,4,5} /testdir/dir5/dir{6,7}\n[root@192 ~]# ll /testdir/dir{3,4,5}\n/testdir/dir3:\ntotal 0\n\n/testdir/dir4:\ntotal 0\n\n/testdir/dir5:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jul  2 15:11 dir6\ndrwxr-xr-x 2 root root 4096 Jul  2 15:11 dir7\n[root@192 ~]#\n```\n\n## **æ–‡ä»¶å…ƒæ•°æ®å’ŒèŠ‚ç‚¹è¡¨ç»“æ„**\n\n### **inode** **è¡¨ç»“æ„**\n\næ®æ˜¯å­˜æ”¾åœ¨inodeï¼ˆindex nodeï¼‰è¡¨ä¸­ã€‚inode è¡¨ä¸­æœ‰å¾ˆå¤šæ¡è®°å½•ç»„æˆï¼Œç¬¬ä¸€æ¡è®°å½•å¯¹åº”çš„å­˜æ”¾äº†ä¸€ä¸ª\n\næ–‡ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯\n\næ¯ä¸€ä¸ªinodeè¡¨è®°å½•å¯¹åº”çš„ä¿å­˜äº†ä»¥ä¸‹ä¿¡æ¯ï¼š\n\n```bash\ninode number èŠ‚ç‚¹å·\næ–‡ä»¶ç±»å‹\næƒé™\nUID\nGID\né“¾æ¥æ•°ï¼ˆæŒ‡å‘è¿™ä¸ªæ–‡ä»¶åè·¯å¾„åç§°ä¸ªæ•°ï¼‰\nè¯¥æ–‡ä»¶çš„å¤§å°å’Œä¸åŒçš„æ—¶é—´æˆ³\næŒ‡å‘ç£ç›˜ä¸Šæ–‡ä»¶çš„æ•°æ®å—æŒ‡é’ˆ\næœ‰å…³æ–‡ä»¶çš„å…¶ä»–æ•°æ®\n```\n\n![image-20250702154244938](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702154244938.png)\n\n\n\n**ç›®å½•**\n\nç›®å½•æ˜¯ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œç›®å½•æ–‡ä»¶çš„å†…å®¹ä¿å­˜äº†æ­¤ç›®å½•ä¸­æ–‡ä»¶çš„åˆ—è¡¨åŠinode numberå¯¹åº”å…³ç³»\n\næ–‡ä»¶å¼•ç”¨ä¸€ä¸ªæ˜¯ inodeå·\n\näººæ˜¯é€šè¿‡æ–‡ä»¶åæ¥å¼•ç”¨ä¸€ä¸ªæ–‡ä»¶\n\nä¸€ä¸ªç›®å½•æ˜¯ç›®å½•ä¸‹çš„æ–‡ä»¶åå’Œæ–‡ä»¶inodeå·ä¹‹é—´çš„æ˜ å°„\n\n**inodeè¡¨å’Œç›®å½•**\n\n![image-20250702155212719](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702155212719.png)\n\n**cpå’Œinode**\n\ncp å‘½ä»¤ï¼š\n\n  åˆ†é…ä¸€ä¸ªç©ºé—²çš„inodeå·ï¼Œåœ¨inodeè¡¨ä¸­ç”Ÿæˆæ–°æ¡ç›®\n\n  åœ¨ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç›®å½•é¡¹ï¼Œå°†åç§°ä¸inodeç¼–å·å…³è”\n\n  æ‹·è´æ•°æ®ç”Ÿæˆæ–°çš„æ–‡ä»¶\n\n**rmå’Œinode**\n\nrm å‘½ä»¤ï¼š\n\n  é“¾æ¥æ•°é€’å‡ï¼Œä»è€Œé‡Šæ”¾çš„inodeå·å¯ä»¥è¢«é‡ç”¨\n\n  æŠŠæ•°æ®å—æ”¾åœ¨ç©ºé—²åˆ—è¡¨ä¸­\n\n  åˆ é™¤ç›®å½•é¡¹\n\n  æ•°æ®å®é™…ä¸Šä¸ä¼šé©¬ä¸Šè¢«åˆ é™¤ï¼Œä½†å½“å¦ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨æ•°æ®å—æ—¶å°†è¢«è¦†ç›–\n\n**mvå’Œinode**\n\n  å¦‚æœmvå‘½ä»¤çš„ç›®æ ‡å’Œæºåœ¨ç›¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½œä¸ºmv å‘½ä»¤\n\nâ€‹    ç”¨æ–°çš„æ–‡ä»¶ååˆ›å»ºå¯¹åº”æ–°çš„ç›®å½•é¡¹\n\nâ€‹    åˆ é™¤æ—§ç›®å½•æ¡ç›®å¯¹åº”çš„æ—§çš„æ–‡ä»¶å\n\nâ€‹    ä¸å½±å“inodeè¡¨ï¼ˆé™¤æ—¶é—´æˆ³ï¼‰æˆ–ç£ç›˜ä¸Šçš„æ•°æ®ä½ç½®ï¼šæ²¡æœ‰æ•°æ®è¢«ç§»åŠ¨ï¼\n\n  å¦‚æœç›®æ ‡å’Œæºåœ¨ä¸€ä¸ªä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œ mvç›¸å½“äºcpå’Œrm\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 ~]#df -i /boot\nFilesystem   Inodes IUsed IFree IUse% Mounted on\n/dev/sda1    65536  310 65226  1% /boot\n[root@centos8 ~]#mkdir /boot/test\n[root@centos8 ~]#touch /boot/test/file{1..65226}\n[root@centos8 ~]#touch /boot/test/new.txt\ntouch: cannot touch 'new.txt': No space left on device\n[root@centos8 ~]#df /boot\nFilesystem   1K-blocks  Used Available Use% Mounted on\n/dev/sda1     999320 133800  796708 15% /boot\n[root@centos8 ~]#df -i /boot\nFilesystem   Inodes IUsed IFree IUse% Mounted on\n/dev/sda1    65536 65536   0 100% /boot\n```\n\nèŒƒä¾‹ï¼šåˆ é™¤å¤§æ–‡ä»¶\n\n```bash\n[root@centos8 ~]#cat /dev/null > /var/log/huge.log\n```\n\n### ç¡¬ï¼ˆhardï¼‰é“¾æ¥\n\nç¡¬é“¾æ¥æœ¬è´¨ä¸Šå°±ç»™ä¸€ä¸ªæ–‡ä»¶èµ·ä¸€ä¸ªæ–°çš„åç§°ï¼Œå®è´¨æ˜¯åŒä¸€ä¸ªæ–‡ä»¶\n\nç¡¬é“¾æ¥ç‰¹æ€§\n\n```bash\nåˆ›å»ºç¡¬é“¾æ¥ä¼šåœ¨å¯¹åº”çš„ç›®å½•ä¸­å¢åŠ é¢å¤–çš„è®°å½•é¡¹ä»¥å¼•ç”¨æ–‡ä»¶\nå¯¹åº”äºåŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸Šä¸€ä¸ªç‰©ç†æ–‡ä»¶\næ¯ä¸ªç›®å½•å¼•ç”¨ç›¸åŒçš„inodeå·\nåˆ›å»ºæ—¶é“¾æ¥æ•°é€’å¢\nåˆ é™¤æ–‡ä»¶æ—¶ï¼šrmå‘½ä»¤é€’å‡è®¡æ•°çš„é“¾æ¥ï¼Œæ–‡ä»¶è¦å­˜åœ¨ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªé“¾æ¥æ•°ï¼Œå½“é“¾æ¥æ•°ä¸ºé›¶æ—¶ï¼Œè¯¥æ–‡ä»¶è¢«åˆ é™¤\nä¸èƒ½è·¨è¶Šé©±åŠ¨å™¨æˆ–åˆ†åŒº\nä¸æ”¯æŒå¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥\n```\n\næ ¼å¼:\n\n```bash\nln filename [linkname ]\n```\n\n### ç¬¦å· symbolic ï¼ˆæˆ–è½¯ softï¼‰é“¾æ¥\n\nä¸€ä¸ªç¬¦å·é“¾æ¥æŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶,å°±åƒ windows ä¸­å¿«æ·æ–¹å¼ï¼Œè½¯é“¾æ¥æ–‡ä»¶å’ŒåŸæ–‡ä»¶æœ¬è´¨ä¸Šä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶\n\nè½¯é“¾æ¥ç‰¹ç‚¹\n\n```bash\nä¸€ä¸ªç¬¦å·é“¾æ¥çš„å†…å®¹æ˜¯å®ƒå¼•ç”¨æ–‡ä»¶çš„åç§°\nå¯ä»¥å¯¹ç›®å½•åˆ›å»ºè½¯é“¾æ¥\nå¯ä»¥è·¨åˆ†åŒºçš„æ–‡ä»¶å®ç°\næŒ‡å‘çš„æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼›å…¶å¤§å°ä¸ºæŒ‡å‘çš„è·¯å¾„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼›ä¸å¢åŠ æˆ–å‡å°‘ç›®æ ‡æ–‡ä»¶inodeçš„å¼•ç”¨è®¡æ•°\nåœ¨åˆ›å»ºè½¯é“¾æ¥æ—¶, å¦‚æœæºæ–‡ä»¶ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯ç›¸å¯¹äºè½¯é“¾æ¥æ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œéç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•,ä½†æ˜¯è½¯é“¾æ¥çš„è·¯å¾„å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„,åˆ™æ˜¯ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•\n```\n\næ ¼å¼ï¼š\n\n```bash\nln -s filename [linkname]\n```\n\nèŒƒä¾‹: æŸ¥çœ‹è½¯é“¾æ¥\n\n```bash\n[root@ubuntu1804 ~]#ll /bin/sh\nlrwxrwxrwx 1 root root 4 Nov 1 02:16 /bin/sh -> dash*\nroot@ubuntu2004:~# ll /bin/sh\nlrwxrwxrwx 1 root root 4 Apr 23 2020 /bin/sh -> dash*\n[root@centos8 ~]#ll /bin/sh\nlrwxrwxrwx. 1 root root 4 Jul 22 2020 /bin/sh -> bash\n[root@centos7 ~]#ll /bin/sh\nlrwxrwxrwx. 1 root root 4 Mar 14 10:46 /bin/sh -> bash\n```\n\nèŒƒä¾‹:\n\n```bash\n#ç»å¯¹è·¯å¾„\nln -s /data/dir /data/dirlink\n#ç›¸å¯¹è·¯å¾„\ncd /data\nln -s ../data/dir /root/dirlink\n#æŸ¥çœ‹é“¾æ¥æ–‡ä»¶æŒ‡å‘çš„åŸæ–‡ä»¶\nreadlink /data/dirlink\n[root@centos8 ~]#readlink /proc/$$/exe\n/usr/bin/bash\n```\n\nèŒƒä¾‹: åˆ é™¤è½¯é“¾æ¥æ—¶å§¿åŠ¿ä¸å¯¹é€ æˆçš„ç”Ÿäº§äº‹æ•…\n\n```bash\nm -rf /data/dirlink  #åªåˆ é™¤è½¯é“¾æ¥æœ¬èº«,ä¸ä¼šåˆ é™¤æºç›®å½•å†…å®¹\nrm -rf /data/dirlink/  #åˆ é™¤æºç›®å½•çš„æ–‡ä»¶,ä½†ä¸ä¼šåˆ é™¤é“¾æ¥æ–‡ä»¶,æ­¤æ–¹æ³•éå¸¸å±é™©\n#æ³¨æ„: åˆ é™¤æ­¤è½¯é“¾æ¥åŠ¡å¿…ä¸è¦åŠ -ré€‰é¡¹\n```\n\n### ğŸŒŸ**ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥åŒºåˆ«æ€»ç»“**\n\n```bash\n1. æœ¬è´¨ï¼š\n  ç¡¬é“¾æ¥ï¼šæœ¬è´¨æ˜¯åŒä¸€ä¸ªæ–‡ä»¶\n\tè½¯é“¾æ¥ï¼šæœ¬è´¨ä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶\n2. è·¨è®¾å¤‡\n\tç¡¬é“¾æ¥ï¼šä¸æ”¯æŒ\n\tè½¯é“¾æ¥ï¼šæ”¯æŒ\n3. inode\n\tç¡¬é“¾æ¥ï¼šç›¸åŒ\n\tè½¯é“¾æ¥ï¼šä¸åŒ\n4. é“¾æ¥æ•°\n\tç¡¬é“¾æ¥ï¼šåˆ›å»ºæ–°çš„ç¡¬é“¾æ¥,é“¾æ¥æ•°ä¼šå¢åŠ ,åˆ é™¤ç¡¬é“¾æ¥,é“¾æ¥æ•°å‡å°‘\n\tè½¯é“¾æ¥ï¼šåˆ›å»ºæˆ–åˆ é™¤,é“¾æ¥æ•°ä¸ä¼šå˜åŒ–\n5. æ–‡ä»¶å¤¹\n\tç¡¬é“¾æ¥ï¼šä¸æ”¯æŒ\n\tè½¯é“¾æ¥ï¼šæ”¯æŒ\n6. ç›¸å¯¹è·¯å¾„\n\tç¡¬é“¾æ¥ï¼šåŸå§‹æ–‡ä»¶ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•\n\tè½¯é“¾æ¥ï¼šåŸå§‹æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºé“¾æ¥æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„\n7. åˆ é™¤æºæ–‡ä»¶\n\tç¡¬é“¾æ¥ï¼šåªæ˜¯é“¾æ¥æ•°å‡ä¸€,ä½†é“¾æ¥æ–‡ä»¶çš„è®¿é—®ä¸å—å½±å“\n\tè½¯é“¾æ¥ï¼šé“¾æ¥æ–‡ä»¶å°†æ— æ³•è®¿é—®\n8. æ–‡ä»¶ç±»å‹\n\tç¡¬é“¾æ¥ï¼šå’Œæºæ–‡ä»¶ç›¸åŒ\n\tè½¯é“¾æ¥ï¼šé“¾æ¥æ–‡ä»¶,å’Œæºæ–‡ä»¶æ— å…³\n9. æ–‡ä»¶å¤§å°\n\tç¡¬é“¾æ¥: å’Œæºæ–‡ä»¶ç›¸åŒ\n\tè½¯é“¾æ¥: æºæ–‡ä»¶çš„è·¯å¾„çš„é•¿åº¦\n```\n\n### ç”Ÿäº§æ¡ˆä¾‹\n\n**æ¡ˆä¾‹1ï¼šæç¤ºç©ºé—´æ»¡ No space left on deviceï¼Œä½† df å¯ä»¥çœ‹åˆ°ç©ºé—´å¾ˆå¤šï¼Œä¸ºä»€ä¹ˆï¼Ÿ**\n\nå‡è®¾ä½ æœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå…¶æ€»inodeæ•°ä¸º`4194304`ä¸ªã€‚å½“å‰å·²ç»ä½¿ç”¨äº†`60830`ä¸ªinodeï¼Œå‰©ä½™å¯ç”¨çš„inodeæ•°é‡ä¸º`4133474`ä¸ªã€‚ä½ å°è¯•åˆ›å»ºå¤§é‡æ–‡ä»¶ï¼Œç›´åˆ°inodeè€—å°½ã€‚\n\n```bash\n[root@192 ~]# df\nFilesystem                 1K-blocks    Used Available Use% Mounted on\n/dev/mapper/openeuler-root  65617452 2570440  59681332   5% /\n[root@192 ~]# df -i\nFilesystem                  Inodes IUsed   IFree IUse% Mounted on\n/dev/mapper/openeuler-root 4194304 60830 4133474    2% /\n```\n\n`åˆ›å»ºå¤§é‡æ–‡ä»¶è€—å°½inode`\n\nå‡è®¾ä½ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºäº†å¤§é‡æ–‡ä»¶ï¼š\n\n```bash\nfor i in {1..4100000}; do touch /test/f$i; done\n```\n\n**ä¸­é—´çŠ¶æ€**\n\nåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œinodeé€æ¸è¢«è€—å°½ã€‚å‡è®¾ä½ åˆ›å»ºäº†å¤§çº¦3500000ä¸ªæ–‡ä»¶åï¼Œinodeä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š\n\n```bash\n[root@192 ~]# df -i\nFilesystem                  Inodes  IUsed   IFree IUse% Mounted on\n/dev/mapper/openeuler-root 4194304 3560830  633474   85% /\n```\n\n**åˆ›å»ºæ›´å¤šæ–‡ä»¶ç›´åˆ°inodeè€—å°½**\n\nç»§ç»­åˆ›å»ºæ–‡ä»¶ï¼Œç›´åˆ°inodeè€—å°½ï¼š\n\n```bash\nfor i in {3500001..4100000}; do touch /test/f$i; done\n```\n\n**æœ€ç»ˆçŠ¶æ€**\n\nå½“inodeè€—å°½åï¼Œæ­¤æ—¶ï¼Œ`df`å’Œ`df -i`çš„è¾“å‡ºå¯èƒ½å¦‚ä¸‹ï¼š\n\n```bash\n[root@192 ~]# df -i\nFilesystem                  Inodes  IUsed   IFree IUse% Mounted on\n/dev/mapper/openeuler-root 4194304 4194303      1  100% /\n[root@192 ~]# df\nFilesystem                 1K-blocks    Used Available Use% Mounted on\n/dev/mapper/openeuler-root  65617452 2570440  59681332   5% /\n```\n\næ­¤æ—¶ï¼Œ`IUsed`è¾¾åˆ°äº†4194303ï¼Œ`IFree`åªå‰©ä¸‹1ï¼Œ`IUse%`è¾¾åˆ°äº†100%ã€‚\n\n`/dev/mapper/openeuler-root`çš„ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡ä»…ä¸º5%ï¼Œè¿˜æœ‰å¤§é‡çš„ç©ºé—´å¯ç”¨ã€‚\n\n**å°è¯•åˆ›å»ºæ–°æ–‡ä»¶**\n\næ­¤æ—¶ï¼Œä½ å°è¯•åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼š`touch /test/newfile`\n\nä½ ä¼šæ”¶åˆ°ä»¥ä¸‹é”™è¯¯ï¼š\n\n```\ntouch: cannot touch '/test/newfile': No space left on device\n```\n\n> ç»“è®ºï¼šä¸ºä»€ä¹ˆä¼šå‡ºç°â€œ`No space left on device`â€ï¼Ÿ\n>\n> å°½ç®¡ç£ç›˜ç©ºé—´å……è¶³ï¼Œä½†inodeå·²ç»è€—å°½ã€‚æ¯ä¸ªæ–‡ä»¶å’Œç›®å½•éƒ½éœ€è¦ä¸€ä¸ªinodeæ¥å­˜å‚¨å…¶å…ƒæ•°æ®ã€‚å½“inodeè€—å°½æ—¶ï¼Œå³ä½¿ç£ç›˜ç©ºé—´è¿˜æœ‰å‰©ä½™ï¼Œä¹Ÿæ— æ³•åˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚å› æ­¤ï¼Œå½“ä½ å°è¯•åˆ›å»ºæ–°æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šæŠ¥å‡ºâ€œ`No space left on device`â€çš„é”™è¯¯ã€‚\n\n\n\næ¡ˆä¾‹2ï¼šæç¤ºç©ºé—´å¿«æ»¡ï¼Œä½¿ç”¨ rm åˆ é™¤äº†å¾ˆå¤§çš„æ— ç”¨æ–‡ä»¶åï¼Œdfä»ç„¶çœ‹åˆ°ç©ºé—´ä¸è¶³ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ\n\nå¤ç°è¿‡ç¨‹\n\n**æŸ¥çœ‹dfçŠ¶æ€** åˆ©ç”¨ç‡5%\n\n```bash\n[root@192 ~]# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\n/dev/mapper/openeuler-root   63G  2.5G   57G   5% /\n```\n\n**åˆ›å»ºä¸€ä¸ªå¤§æ–‡ä»¶**\n\n```bash\n[root@192 ~]# dd if=/dev/zero of=/bigfile bs=1G count=1\n1+0 records in\n1+0 records out\n1073741824 bytes (1.1 GB, 1.0 GiB) copied, 0.622914 s, 1.7 GB/s\n```\n\n**æŸ¥çœ‹ç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µ** åˆ©ç”¨ç‡6%\n\n```bash\n[root@192 ~]# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\n/dev/mapper/openeuler-root   63G  3.5G   56G   6% /\n```\n\nè¿™æ—¶å€™å¤åˆ¶ä¸€ä¸ªçª—å£ï¼Œvimè¿›å»\n\n![image-20250702163044341](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702163044341.png)\n\n```bash\n#æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å ç”¨\n[root@192 ~]# lsof | grep bigfile\nvim       53885                          root   4u      REG              253,0     4096         13 /.bigfile.swp\n#åˆ é™¤å ç”¨çš„è¿›ç¨‹\nkill -9 53885\n#å½“æ‰§è¡Œåˆ é™¤çš„æ—¶å€™ï¼Œå…¶ä»–äººæ­£åœ¨å ç”¨çš„vimçª—å£å°±ä¼šå¼ºåˆ¶é€€å‡ºï¼Œå¹¶ä¸”é‡Šæ”¾ç©ºé—´\n```\n\n![image-20250702163336464](%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91.assets/image-20250702163336464.png)\n\nä½¿ç”¨`rm`åˆ é™¤äº†å¾ˆå¤§çš„æ— ç”¨æ–‡ä»¶åï¼Œ`df`ä»ç„¶çœ‹åˆ°ç©ºé—´ä¸è¶³â€çš„æƒ…å†µã€‚åŸå› æ˜¯æ–‡ä»¶è¢«æŸä¸ªè¿›ç¨‹å ç”¨ï¼Œå¯¼è‡´ç£ç›˜ç©ºé—´æ²¡æœ‰ç«‹å³é‡Šæ”¾ã€‚é€šè¿‡æŸ¥æ‰¾å¹¶å…³é—­å ç”¨æ–‡ä»¶çš„è¿›ç¨‹ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n\n\n## **IO** **é‡å®šå‘å’Œç®¡é“**\n\n### **æ ‡å‡†è¾“å…¥å’Œè¾“å‡º**\n\nç¨‹åºï¼šæŒ‡ä»¤+æ•°æ®\n\nè¯»å…¥æ•°æ®ï¼šInput\n\nè¾“å‡ºæ•°æ®ï¼šOutput\n\næ‰“å¼€çš„æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªfd: file descriptor (æ–‡ä»¶æè¿°ç¬¦)\n\nLinuxç»™ç¨‹åºæä¾›ä¸‰ç§ I/O è®¾å¤‡\n\n  æ ‡å‡†è¾“å…¥ï¼ˆSTDINï¼‰ ï¼0 é»˜è®¤æ¥å—æ¥è‡ªç»ˆç«¯çª—å£çš„è¾“å…¥\n\n  æ ‡å‡†è¾“å‡ºï¼ˆSTDOUTï¼‰ï¼1 é»˜è®¤è¾“å‡ºåˆ°ç»ˆç«¯çª—å£\n\n  æ ‡å‡†é”™è¯¯ï¼ˆSTDERRï¼‰ ï¼2 é»˜è®¤è¾“å‡ºåˆ°ç»ˆç«¯çª—å£\n\nèŒƒä¾‹ï¼šæ–‡ä»¶æè¿°ç¬¦\n\n```bash\n[root@centos8 ~]#ll /dev/std*\nlrwxrwxrwx. 1 root root 15 Dec 16 08:56 /dev/stderr -> /proc/self/fd/2\nlrwxrwxrwx. 1 root root 15 Dec 16 08:56 /dev/stdin -> /proc/self/fd/0\nlrwxrwxrwx. 1 root root 15 Dec 16 08:56 /dev/stdout -> /proc/self/fd/1\n[root@centos8 ~]#ll /proc/self/fd/*\nls: cannot access '/proc/self/fd/255': No such file or directory\nlrwx------. 1 root root 64 Dec 16 10:59 /proc/self/fd/0 -> /dev/pts/0\nlrwx------. 1 root root 64 Dec 16 10:59 /proc/self/fd/1 -> /dev/pts/0\nlrwx------. 1 root root 64 Dec 16 10:59 /proc/self/fd/2 -> /dev/pts/0\nlr-x------. 1 root root 64 Dec 16 10:59 /proc/self/fd/3 -> \n/var/lib/sss/mc/passwd\nlrwx------. 1 root root 64 Dec 16 10:59 /proc/self/fd/4 -> 'socket:[66542]'\nlr-x------. 1 root root 64 Dec 16 10:59 /proc/self/fd/5 -> /var/lib/sss/mc/group\n[root@centos8 ~]#ll /proc/`pidof tail`/fd\ntotal 0\nlrwx------. 1 root root 64 Dec 16 10:56 0 -> /dev/pts/1\nlrwx------. 1 root root 64 Dec 16 10:56 1 -> /dev/pts/1\nlrwx------. 1 root root 64 Dec 16 10:56 2 -> /dev/pts/1\nlr-x------. 1 root root 64 Dec 16 10:56 3 -> /var/log/messages\nlr-x------. 1 root root 64 Dec 16 10:56 4 -> anon_inode:inotify\n```\n\nèŒƒä¾‹: æ–‡ä»¶æè¿°ç¬¦\n\n```bash\n[root@centos8 ~]#cat test.txt\nhello\n[root@centos8 ~]#cat file.py\nimport time\nf = open('test.txt','r')\ntime.sleep(1000)\n[root@centos8 ~]#python3 file.py\n[root@centos8 ~]#ll /proc/`pidof python3`/fd\ntotal 0\nlrwx------ 1 root root 64 Apr 6 18:13 0 -> /dev/pts/0\nlrwx------ 1 root root 64 Apr 6 18:13 1 -> /dev/pts/0\nlrwx------ 1 root root 64 Apr 6 18:13 2 -> /dev/pts/0\nlr-x------ 1 root root 64 Apr 6 18:13 3 -> /root/test.txt\n```\n\n### I/Oé‡å®šå‘redirect\n\nI/Oé‡å®šå‘ï¼šå°†é»˜è®¤çš„è¾“å…¥ï¼Œè¾“å‡ºæˆ–é”™è¯¯å¯¹åº”çš„è®¾å¤‡æ”¹å˜ï¼ŒæŒ‡å‘æ–°çš„ç›®æ ‡\n\n#### **æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯é‡æ–°å®šå‘**\n\nSTDOUTå’ŒSTDERRå¯ä»¥è¢«é‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶,è€Œéé»˜è®¤çš„å½“å‰ç»ˆç«¯\n\næ ¼å¼\n\n```bash\nå‘½ä»¤ æ“ä½œç¬¦å· æ–‡ä»¶å\n```\n\n**æ”¯æŒçš„æ“ä½œç¬¦å·åŒ…æ‹¬**\n\n```bash\n1> æˆ– >   æŠŠSTDOUTé‡å®šå‘åˆ°æ–‡ä»¶\n2> æŠŠSTDERRé‡å®šå‘åˆ°æ–‡ä»¶\n&> æŠŠæ ‡å‡†è¾“å‡ºå’Œé”™è¯¯éƒ½é‡å®šå‘\n>& å’Œä¸Šé¢åŠŸèƒ½ä¸€æ ·ï¼Œå»ºè®®ä½¿ç”¨ä¸Šé¢æ–¹å¼\n```\n\nä»¥ä¸Šå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶å†…å®¹ä¼šè¢«è¦†ç›–\n\n**è¿½åŠ **\n\n`>>` å¯ä»¥åœ¨åŸæœ‰å†…å®¹åŸºç¡€ä¸Šï¼Œè¿½åŠ å†…å®¹\n\næŠŠè¾“å‡ºå’Œé”™è¯¯é‡æ–°å®šå‘è¿½åŠ åˆ°æ–‡ä»¶\n\n```bash\n>> è¿½åŠ æ ‡å‡†è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶\n2>> è¿½åŠ æ ‡å‡†é”™è¯¯é‡å®šå‘è‡³æ–‡ä»¶\n```\n\n**æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºå„è‡ªå®šå‘è‡³ä¸åŒä½ç½®**\n\n```bash\nCOMMAND > /path/to/file.out 2> /path/to/error.out\n```\n\n**åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¸ºåŒä¸€ä¸ªæ•°æ®æµè¿›è¡Œé‡å®šå‘**\n\n```bash\n&>  è¦†ç›–é‡å®šå‘\n&>> è¿½åŠ é‡å®šå‘\nCOMMAND > /path/to/file.out 2>&1 ï¼ˆé¡ºåºå¾ˆé‡è¦ï¼‰\nCOMMAND >> /path/to/file.out 2>&1\n```\n\n\n\n**åˆå¹¶å¤šä¸ªç¨‹åº**\n\n (CMD1;CMD2......) æˆ–è€…{ CMD1;CMD2;....; }åˆå¹¶å¤šä¸ªç¨‹åºçš„STDOUT\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#ls 1> /dev/pts/1\n[root@centos8 ~]#ls /data > /dev/pts/1\n```\n\nèŒƒä¾‹ï¼šæ ‡å‡†é”™è¯¯é‡å®šå‘\n\n```bash\n[root@centos8 ~]#rm /data/f1.log 2> /data/all.log\n```\n\nèŒƒä¾‹ï¼šåˆå¹¶å¤šä¸ªå‘½ä»¤çš„ç»“æœè‡³ä¸€ä¸ªæ–‡ä»¶ä¸­\n\n```bash\n[root@centos8 ~]#( cal 2019 ; cal 2020 ) > all.txt\n[root@centos8 ~]#{ ls;hostname;} > /data/all.log\n```\n\nèŒƒä¾‹ï¼šæ¸…é™¤å¤§æ–‡ä»¶\n\n```bash\n#é€šç”¨\ncat /dev/null > /data/file.log\n#ä¾èµ–äºshellç±»å‹,ä¸é€šç”¨\n> /data/file.log\n```\n\nèŒƒä¾‹ï¼šåˆ†åˆ«é‡å®šå‘\n\n```bash\n[root@centos8 ~]#ls /data/ /xxx > stdout.log 2> stderr.log\n```\n\nèŒƒä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯éƒ½é‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶\n\n```bash\n[root@centos8 ~]#ls /data /xxx > /data/all.log 2>&1\n[root@centos8 ~]#ls /data /xxx 2> /data/all.log 1>&2\n[root@centos8 ~]#ls /data /xxx &> /data/all.log \n[root@centos8 ~]#ls /data /xxx >& /data/all.log \n[root@centos8 ~]#ls /data /xxx 2>&1 > /data/all.log\n```\n\n- **å‰å››æ¡å‘½ä»¤**ï¼š\n  - éƒ½æ˜¯å…ˆå¤„ç†æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡†é”™è¯¯çš„é‡å®šå‘ï¼Œç„¶åå†å¤„ç†å¦ä¸€ä¸ªæµçš„é‡å®šå‘ã€‚\n  - ä¾‹å¦‚ï¼Œ`ls /data /xxx > /data/all.log 2>&1`å…ˆå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ï¼Œå†å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚\n- **ç¬¬äº”æ¡å‘½ä»¤**ï¼š\n  - `ls /data /xxx 2>&1 > /data/all.log`å…ˆå°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶åå†å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ã€‚\n  - è¿™ç§é¡ºåºåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä¸åŒçš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨æ›´å¤æ‚çš„å‘½ä»¤ä¸­ã€‚ä½†åœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œæœ€ç»ˆç»“æœæ˜¯ç›¸åŒçš„ã€‚\n\n\n\nèŒƒä¾‹\n\n```bash\n[root@centos8 ~]#man bash > bash.txt\n[root@centos8 ~]#wc -l bash.txt\n3821 bash.txt\n```\n\nèŒƒä¾‹\n\n```bash\n[root@192 ~]# passwd wang\npasswd: Unknown user name 'wang'.\n[root@192 ~]# passwd wang &> /dev/null\n[root@192 ~]#\n```\n\n\n\nèŒƒä¾‹: å®ç°æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯çš„äº’æ¢\n\n```bash\n[root@centos8 ~]#ls f1.txt f2.txt\nls: cannot access 'f1.txt': No such file or directory\nls: cannot access 'f2.txt': No such file or directory\n[root@centos8 ~]#( cat /etc/centos-release /etc/xxx 3>&1 1>&2 2>&3 ) > f1.txt \n2> f2.txt\n[root@centos8 ~]#cat f1.txt \ncat: /etc/xxx: No such file or directory\n[root@centos8 ~]#cat f2.txt \nCentOS Linux release 8.2.2004 (Core)\n```\n\n#### **æ ‡å‡†è¾“å…¥é‡å®šå‘**\n\nä»æ–‡ä»¶ä¸­å¯¼å…¥STDINï¼Œä»£æ›¿å½“å‰ç»ˆç«¯çš„è¾“å…¥è®¾å¤‡ï¼Œä½¿ç”¨ < æ¥é‡å®šå‘æ ‡å‡†è¾“å…¥\n\næŸäº›å‘½ä»¤èƒ½å¤Ÿæ¥å—ä»æ–‡ä»¶ä¸­å¯¼å…¥çš„STDIN\n\n##### **tr** **å‘½ä»¤**\n\ntr è½¬æ¢å’Œåˆ é™¤å­—ç¬¦\n\n```bash\ntr [OPTION]... SET1 [SET2]\n```\n\n```bash\n-d --deleteï¼šåˆ é™¤æ‰€æœ‰å±äºç¬¬ä¸€å­—ç¬¦é›†çš„å­—ç¬¦\n-s --squeeze-repeatsï¼šæŠŠè¿ç»­é‡å¤çš„å­—ç¬¦ä»¥å•ç‹¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤º,å³å»é‡\n-t --truncate-set1ï¼šå°†ç¬¬ä¸€ä¸ªå­—ç¬¦é›†å¯¹åº”å­—ç¬¦è½¬åŒ–ä¸ºç¬¬äºŒå­—ç¬¦é›†å¯¹åº”çš„å­—ç¬¦\n-c â€“C --complementï¼šå–å­—ç¬¦é›†çš„è¡¥é›†\n \\NNN      character with octal value NNN (1 to 3 octal digits)\n \\\\       backslash\n \\a       audible BEL\n \\b       backspace\n \\f       form feed\n \\n       new line\n \\r       return\n \\t       horizontal tab\n \\v       vertical tab\n[:alnum:]ï¼šå­—æ¯å’Œæ•°å­—\n[:alpha:]ï¼šå­—æ¯\n[:digit:]ï¼šæ•°å­—\n[:lower:]ï¼šå°å†™å­—æ¯\n[:upper:]ï¼šå¤§å†™å­—æ¯\n[:space:]ï¼šç©ºç™½å­—ç¬¦\n[:print:]ï¼šå¯æ‰“å°å­—ç¬¦\n[:punct:]ï¼šæ ‡ç‚¹ç¬¦å·\n[:graph:]ï¼šå›¾å½¢å­—ç¬¦\n[:cntrl:]ï¼šæ§åˆ¶ï¼ˆéæ‰“å°ï¼‰å­—ç¬¦\n[:xdigit:]ï¼šåå…­è¿›åˆ¶å­—ç¬¦\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n#è¯¥å‘½ä»¤ä¼šæŠŠ/etc/issueä¸­çš„å°å†™å­—ç¬¦éƒ½è½¬æ¢æˆå¤§å†™å­—ç¬¦\n[root@192 ~]# cat /etc/issue\nAuthorized users only. All activities may be monitored and reported.\n\n[root@192 ~]# tr a-z A-Z< /etc/issue\nAUTHORIZED USERS ONLY. ALL ACTIVITIES MAY BE MONITORED AND REPORTED.\n[root@192 ~]#\n\n#åˆ é™¤fstabæ–‡ä»¶ä¸­çš„æ‰€æœ‰abcä¸­ä»»æ„å­—ç¬¦\n[root@192 ~]# echo \"acvsfasdfSDFD21343243\" > 1.txt\n[root@192 ~]# cat 1.txt\nacvsfasdfSDFD21343243\n[root@192 ~]# tr -d abc < 1.txt\nvsfsdfSDFD21343243\n[root@192 ~]#\n```\n\n\n\nèŒƒä¾‹ï¼šå°†æ‰€æœ‰çš„è¿ç»­ç©ºæ ¼æ›¿æ¢æˆä¸€ä¸ªç©ºæ ¼æˆ–åˆ«çš„ç¬¦å·\n\n```bash\n[root@192 ~]# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\n/dev/mapper/openeuler-root   63G  2.5G   57G   5% /\ndevtmpfs                    4.0M     0  4.0M   0% /dev\ntmpfs                       1.7G     0  1.7G   0% /dev/shm\ntmpfs                       4.0M     0  4.0M   0% /sys/fs/cgroup\ntmpfs                       675M  9.1M  666M   2% /run\ntmpfs                       1.7G     0  1.7G   0% /tmp\n/dev/sda2                   974M  213M  694M  24% /boot\n/dev/mapper/openeuler-home   31G   24K   29G   1% /home\n[root@192 ~]# df -h > df.log\n[root@192 ~]# tr -s ' ' < df.log\nFilesystem Size Used Avail Use% Mounted on\n/dev/mapper/openeuler-root 63G 2.5G 57G 5% /\ndevtmpfs 4.0M 0 4.0M 0% /dev\ntmpfs 1.7G 0 1.7G 0% /dev/shm\ntmpfs 4.0M 0 4.0M 0% /sys/fs/cgroup\ntmpfs 675M 9.1M 666M 2% /run\ntmpfs 1.7G 0 1.7G 0% /tmp\n/dev/sda2 974M 213M 694M 24% /boot\n/dev/mapper/openeuler-home 31G 24K 29G 1% /home\n[root@192 ~]# tr -s ' ' : < df.log\nFilesystem:Size:Used:Avail:Use%:Mounted:on\n/dev/mapper/openeuler-root:63G:2.5G:57G:5%:/\ndevtmpfs:4.0M:0:4.0M:0%:/dev\ntmpfs:1.7G:0:1.7G:0%:/dev/shm\ntmpfs:4.0M:0:4.0M:0%:/sys/fs/cgroup\ntmpfs:675M:9.1M:666M:2%:/run\ntmpfs:1.7G:0:1.7G:0%:/tmp\n/dev/sda2:974M:213M:694M:24%:/boot\n/dev/mapper/openeuler-home:31G:24K:29G:1%:/home\n```\n\n##### **æ ‡å‡†è¾“å…¥é‡å®šå‘**\n\nå®ç°æ ‡å‡†è¾“å…¥é‡å®šå‘çš„ç¬¦å·\n\n```bash\nCOMMAND 0< FILE\nCOMMAND < FILE\n```\n\næ¯”å¦‚\n\n```bash\ncat > file\nmage\nwangxiaochun\n```\n\næŒ‰ctrl+dç¦»å¼€ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶æ¥ä»£æ›¿é”®ç›˜çš„è¾“å…¥\n\n```bash\ncat < file1 > file2 \ncat < file1 >> file1\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#echo 2^3 > bc.log\n[root@centos8 ~]#cat bc.log\n2^3\n[root@centos8 ~]#bc < bc.log\n8\n[root@centos8 ~]#cat < mail.txt\nhello\nhow old are you\n[root@centos8 ~]#cat mail.txt\nhello\nhow old are you\n[root@centos8 ~]#cat < mail.txt > mail2.txt\n[root@centos8 ~]#cat mail2.txt\nhello\nhow old are you\n[root@centos8 ~]#cat mail.txt \nhello\nhow old are you\n[root@centos8 ~]#mail -s test2 wang < mail.txt\n[root@centos8 ~]#cat > cat.log\nline1\nline2\nline3\n```\n\n##### **æŠŠå¤šè¡Œé‡å®šå‘**\n\nä½¿ç”¨ \"<<ç»ˆæ­¢è¯\" å‘½ä»¤ä»é”®ç›˜æŠŠå¤šè¡Œé‡å¯¼å‘ç»™STDINï¼Œç›´åˆ°ç»ˆæ­¢è¯ä½ç½®ä¹‹å‰çš„æ‰€æœ‰æ–‡æœ¬éƒ½å‘é€ç»™\nSTDINï¼Œæœ‰æ—¶è¢«ç§°ä¸ºå°±åœ°æ–‡æœ¬ï¼ˆhere documentsï¼‰\nå…¶ä¸­ç»ˆæ­¢è¯å¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦å·ï¼Œæ¯”å¦‚ï¼š!ï¼Œ@ï¼Œ$ï¼ŒEOFï¼ˆEnd Of Fileï¼‰ï¼Œmageduç­‰ï¼Œå…¶ä¸­EOF\næ¯”è¾ƒå¸¸ç”¨\n\n```bash\ncat > 1.txt <<\"EOF\"\n213123\n123213\n41324324\nEOF\n```\n\n\n\n##### **é«˜çº§é‡å®šå‘å†™æ³•**\n\n`cmd <<< \"string\"`\n\nå«ä¹‰æ˜¯ here-string ï¼Œè¡¨ç¤ºä¼ ç»™ç»™cmdçš„stdinçš„å†…å®¹ä»è¿™é‡Œå¼€å§‹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@rocky8 ~]#tr 'a-z' 'A-Z' <<<\"I am wang\"\nI AM WANG\n```\n\n`cmd1 < <(cmd2)`\n\nåç§°ä¸º Process substitution ,æ˜¯ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ\n\n`<(cmd2)` è¡¨ç¤ºæŠŠcmd2çš„è¾“å‡ºå†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶, æ³¨æ„ï¼š`<`å’Œ`ï¼ˆ`ä¹‹é—´`æ— ç©ºæ ¼`\n\n`cmd1 < è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„stdiné‡å®šå‘`\n\næŠŠä¸¤ä¸ªåˆèµ·æ¥ï¼Œå°±æ˜¯æŠŠcmd2çš„è¾“å‡ºstdoutä¼ é€’ç»™cmd1ä½œä¸ºè¾“å…¥stdin, ä¸­é—´é€šè¿‡ä¸´æ—¶æ–‡ä»¶åšä¼ é€’\n\n```bash\n[root@rocky8 ~]#tr 'a-z' 'A-Z' < <(echo I am wang)\nI AM WANG\n[root@192 ~]# ll <(echo whoami)\nlr-x------ 1 root root 64 Jul  2 16:53 /dev/fd/63 -> 'pipe:[99822]'\n```\n\n### **ç®¡é“**\n\n#### **ç®¡é“**\n\nç®¡é“ï¼ˆä½¿ç”¨ç¬¦å·â€œ`|`â€è¡¨ç¤ºï¼‰ç”¨æ¥è¿æ¥å¤šä¸ªå‘½ä»¤\n\næ ¼å¼\n\n```bash\nå‘½ä»¤1 | å‘½ä»¤2 | å‘½ä»¤3 | â€¦\n```\n\nåŠŸèƒ½è¯´æ˜ï¼š\n\n  å°†å‘½ä»¤1çš„STDOUTå‘é€ç»™å‘½ä»¤2çš„STDINï¼Œå‘½ä»¤2çš„STDOUTå‘é€åˆ°å‘½ä»¤3çš„STDIN\n\n  æ‰€æœ‰å‘½ä»¤ä¼šåœ¨å½“å‰shellè¿›ç¨‹çš„å­shellè¿›ç¨‹ä¸­æ‰§è¡Œ\n\n  ç»„åˆå¤šç§å·¥å…·çš„åŠŸèƒ½\n\næ³¨æ„ï¼šSTDERRé»˜è®¤ä¸èƒ½é€šè¿‡ç®¡é“è½¬å‘ï¼Œå¯åˆ©ç”¨2>&1 æˆ– |& å®ç°ï¼Œæ ¼å¼å¦‚ä¸‹\n\n```bash\nå‘½ä»¤1 2>&1 | å‘½ä»¤2 \nå‘½ä»¤1 |& å‘½ä»¤2\n```\n\nèŒƒä¾‹\n\n```bash\n[root@192 ~]# df -h > df.log\n[root@192 ~]# tr -s ' ' < df.log\nFilesystem Size Used Avail Use% Mounted on\n/dev/mapper/openeuler-root 63G 2.5G 57G 5% /\ndevtmpfs 4.0M 0 4.0M 0% /dev\ntmpfs 1.7G 0 1.7G 0% /dev/shm\ntmpfs 4.0M 0 4.0M 0% /sys/fs/cgroup\ntmpfs 675M 9.1M 666M 2% /run\ntmpfs 1.7G 0 1.7G 0% /tmp\n/dev/sda2 974M 213M 694M 24% /boot\n/dev/mapper/openeuler-home 31G 24K 29G 1% /home\n[root@192 ~]# df -h| tr -s ' '\nFilesystem Size Used Avail Use% Mounted on\n/dev/mapper/openeuler-root 63G 2.5G 57G 5% /\ndevtmpfs 4.0M 0 4.0M 0% /dev\ntmpfs 1.7G 0 1.7G 0% /dev/shm\ntmpfs 4.0M 0 4.0M 0% /sys/fs/cgroup\ntmpfs 675M 9.1M 666M 2% /run\ntmpfs 1.7G 0 1.7G 0% /tmp\n/dev/sda2 974M 213M 694M 24% /boot\n/dev/mapper/openeuler-home 31G 24K 29G 1% /home\n\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#ls /data /xxx | tr 'a-z' 'A-Z'\nls: cannot access '/xxx': No such file or directory\n/DATA:\nALL.LOG\nF1.TXT\nPASSWD.LOG\nSTERR.LOG\nSTOUT.LOG\nTEST.LOG\nTOUCH.LOG\n[root@centos8 ~]#ls /data /xxx 2>&1 | tr 'a-z' 'A-Z'\nLS: CANNOT ACCESS '/XXX': NO SUCH FILE OR DIRECTORY\n/DATA:\nALL.LOG\nF1.TXT\nPASSWD.LOG\nSTERR.LOG\nSTOUT.LOG\nTEST.LOG\nTOUCH.LOG\n[root@centos8 ~]#ls /data /xxx |& tr 'a-z' 'A-Z'\nLS: CANNOT ACCESS '/XXX': NO SUCH FILE OR DIRECTORY\n/DATA:\nALL.LOG\nF1.TXT\nPASSWD.LOG\nSTERR.LOG\nSTOUT.LOG\nTEST.LOG\nTOUCH.LOG\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@192 ~]# useradd wang\n[root@192 ~]# passwd --stdin wang\nChanging password for user wang.\n123456  #è¿™é‡Œè¾“å…¥å¯†ç ï¼ˆæ‰‹åŠ¨ï¼‰\npasswd: all authentication tokens updated successfully.\n\n#è®¾ç½®å¯†ç æ–‡ä»¶\n[root@192 ~]# cat > pass.txt<< \"EOF\"\n123456\nEOF\n#ç”¨æ–‡ä»¶çš„å¯†ç ä¼ å…¥è¿›è¡Œä¿®æ”¹å¯†ç \n[root@192 ~]# passwd --stdin wang < pass.txt\nChanging password for user wang.\npasswd: all authentication tokens updated successfully.\n[root@192 ~]# cat pass.txt | passwd --stdin wang\nChanging password for user wang.\npasswd: all authentication tokens updated successfully.\n\n#æ˜æ–‡å¯†ç \n[root@192 ~]# echo 123456 | passwd --stdin wang\nChanging password for user wang.\npasswd: all authentication tokens updated successfully.\n[root@192 ~]# echo 123456 | passwd --stdin wang &>/dev/null\n[root@192 ~]#\n\n```\n\n\n\nèŒƒä¾‹ï¼š\n\n```bash\n#è½¬æ¢ä¸ºå¤§å†™å­—æ¯\nls | tr â€˜a-zâ€™ â€˜A-Zâ€™\n#lesså®ç°åˆ†é¡µåœ°æŸ¥çœ‹è¾“å…¥\nls -l /etc | less\n#mailé€šè¿‡ç”µå­é‚®ä»¶å‘é€è¾“å…¥\necho \"test email\" | mail -s \"test\" wang@example.com\n#ç®—æœ¯è¿ç®—\necho \"2^3\" |bc\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@rocky8 ~]#ls --help | grep size\n#æœ‰æ­¤å‘½ä»¤çš„å¸®åŠ©ä¿¡æ˜¯æ˜¯æ ‡å‡†é”™è¯¯\n[root@rocky8 ~]#mysqldump --help |& grep master-data\n```\n\n\n\n#### **tee** **å‘½ä»¤**\n\nåˆ©ç”¨ tee å‘½ä»¤å¯ä»¥é‡å®šå‘åˆ°å¤šä¸ªç›®æ ‡ï¼Œç»å¸¸é…åˆç®¡é“ç¬¦ä¸€èµ·ä½¿ç”¨\n\næ ¼å¼\n\n```bash\nå‘½ä»¤1 | tee [-a ] æ–‡ä»¶å | å‘½ä»¤2\n```\n\nä»¥ä¸Šå¯ä»¥æŠŠå‘½ä»¤1çš„STDOUTä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œåšä¸ºå‘½ä»¤2çš„è¾“å…¥\n\né€‰é¡¹ï¼š\n\n```bash\n-a è¿½åŠ \n```\n\nåŠŸèƒ½ï¼š\n\n  ä¿å­˜ä¸åŒé˜¶æ®µçš„è¾“å‡º\n\n  å¤æ‚ç®¡é“çš„æ•…éšœæ’é™¤\n\n  åŒæ—¶æŸ¥çœ‹å’Œè®°å½•è¾“å‡º\n\nèŒƒä¾‹\n\n```bash\n[root@centos8 ~]#echo {1..100}|tr ' ' +|bc\n5050\n[root@centos8 ~]#echo {1..100..2} | tr ' ' + | bc \n2500\n[root@centos8 ~]#seq -s + 1 100 |bc\n5050\n[root@centos8 ~]#seq -s+ 1 2 100 | bc\n2500\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\ncat <<EOF | tee 2.txt\nwelcome to magedu\nhappy new year\nEOF\n```\n\n```bash\n[root@192 ~]# cat <<EOF | tee 2.txt\nwelcome to magedu\nhappy new year\nEOF\nwelcome to magedu\nhappy new year\n[root@192 ~]#\n```\n\nèŒƒä¾‹\n\n```bash\n[root@192 ~]# tee 3.txt >/dev/null <<\"EOF\"\nwelcome to magedu\nhappy new year\nwelcome to magedu\nhappy new year\nwelcome to magedu\nhappy new year\nEOF\n[root@192 ~]# cat 3.txt\nwelcome to magedu\nhappy new year\nwelcome to magedu\nhappy new year\nwelcome to magedu\nhappy new year\n[root@192 ~]#\n```\n\n<div class=\"tbsm\" style=\"margin-top:54px;\">\n<div class=\"tbsm-top\"><span><svg t=\"1674654360507\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"987\" data-spm-anchor-id=\"a313x.7781069.0.i0\" width=\"35\" height=\"35\"><path d=\"M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z\" fill=\"#66EEFF\" p-id=\"988\"></path><path d=\"M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z\" fill=\"#C2F8FF\" p-id=\"989\"></path></svg></span><span style=\"font-size:30px;\"> ç‰¹åˆ«å£°æ˜</span></div>\n<div class=\"tbsm-wz\">åƒå±¹åšå®¢æ——ä¸‹çš„æ‰€æœ‰æ–‡ç« ï¼Œæ˜¯é€šè¿‡æœ¬äººè¯¾å ‚å­¦ä¹ å’Œè¯¾å¤–è‡ªå­¦æ‰€ç²¾å¿ƒæ•´ç†çš„çŸ¥è¯†å·¨è‘—<br/>éš¾å…ä¼šæœ‰å‡ºé”™çš„åœ°æ–¹<br/>å¦‚æœç»†å¿ƒçš„ä½ å‘ç°äº†å°å¤±è¯¯ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œæˆ–è€…ç§ä¿¡æˆ‘ï¼<br />éå¸¸æ„Ÿè°¢å¤§å®¶çš„çƒ­çƒˆæ”¯æŒï¼</div>\n</div>\n\n\n\n","tags":["è¿ç»´ç¬”è®°"],"categories":["è¿ç»´"]},{"title":"ç”¨æˆ·ã€ç»„å’Œæƒé™","url":"/posts/bca3897f/","content":"\n<meta name=\"referrer\" content=\"no-referrer\"/>\n\n# ç”¨æˆ·ã€ç»„å’Œæƒé™\n\n**å†…å®¹æ¦‚è¿°**\n\n**Linuxçš„å®‰å…¨æ¨¡å‹**\n\n**ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶**\n\n**ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤**\n\n**ç†è§£å¹¶è®¾ç½®æ–‡ä»¶æƒé™**\n\n**é»˜è®¤æƒé™**\n\n**ç‰¹æ®Šæƒé™**\n\n**æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨**\n\n## Linuxå®‰å…¨æ¨¡å‹\n\nèµ„æºåˆ†æ´¾ï¼š\n\n- Authenticationï¼šè®¤è¯ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½\n- Authorizationï¼šæˆæƒï¼Œä¸åŒçš„ç”¨æˆ·è®¾ç½®ä¸åŒæƒé™\n- Accouting|Auditionï¼šå®¡è®¡\n\nå½“ç”¨æˆ·ç™»å½•æˆåŠŸæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä»¤ç‰Œ tokenï¼ŒåŒ…æ‹¬ï¼šç”¨æˆ·æ ‡è¯†å’Œç»„æˆå‘˜ç­‰ä¿¡æ¯\n\n### **ç”¨æˆ·**\n\nLinuxä¸­æ¯ä¸ªç”¨æˆ·æ˜¯é€šè¿‡ User Id ï¼ˆUIDï¼‰æ¥å”¯ä¸€æ ‡è¯†çš„\n\n- `ç®¡ç†å‘˜`ï¼šroot, 0\n\n- `æ™®é€šç”¨æˆ·`ï¼š1-60000 è‡ªåŠ¨åˆ†é…\n\n  - ç³»ç»Ÿç”¨æˆ·ï¼š1-499 ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1-999 ï¼ˆCentOS 7ä»¥åï¼‰\n\n     å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…\n\n  - ç™»å½•ç”¨æˆ·ï¼š500+ ï¼ˆCentOS6ä»¥å‰ï¼‰, 1000+ï¼ˆCentOS7ä»¥åï¼‰\n\n     ç»™ç”¨æˆ·è¿›è¡Œäº¤äº’å¼ç™»å½•ä½¿ç”¨\n\n### **ç”¨æˆ·ç»„**\n\nLinuxä¸­å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·åŠ å…¥ç”¨æˆ·ç»„ä¸­ï¼Œç”¨æˆ·ç»„æ˜¯é€šè¿‡Group IDï¼ˆGIDï¼‰ æ¥å”¯ä¸€æ ‡è¯†çš„ã€‚\n\n- ç®¡ç†å‘˜ç»„ï¼šroot, 0\n\n- æ™®é€šç»„ï¼š\n\n  - ç³»ç»Ÿç»„ï¼š1-499ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1-999ï¼ˆCentOS7ä»¥åï¼‰, å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…\n\n  - æ™®é€šç»„ï¼š500+ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1000+ï¼ˆCentOS7ä»¥åï¼‰, ç»™ç”¨æˆ·ä½¿ç”¨\n\n### **ç”¨æˆ·å’Œç»„çš„å…³ç³»**\n\nç”¨æˆ·çš„ä¸»è¦ç»„(primary group)ï¼šç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªä¸»ç»„ï¼Œé»˜è®¤åˆ›å»ºç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„ç»„ï¼Œåšä¸ºç”¨æˆ·çš„ä¸»è¦ç»„ï¼Œç”±äºæ­¤ç»„ä¸­åªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œåˆç§°ä¸ºç§æœ‰ç»„\n\nç”¨æˆ·çš„é™„åŠ ç»„(supplementary group)ï¼š ä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºé›¶ä¸ªæˆ–å¤šä¸ªè¾…åŠ©ç»„ï¼Œé™„å±ç»„\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 ~]#id postfix\nuid=89(postfix) gid=89(postfix) groups=89(postfix),12(mail)\n```\n\n### **å®‰å…¨ä¸Šä¸‹æ–‡**\n\nLinuxå®‰å…¨ä¸Šä¸‹æ–‡Contextï¼šè¿è¡Œä¸­çš„ç¨‹åºï¼Œå³è¿›ç¨‹ (process)ï¼Œä»¥è¿›ç¨‹å‘èµ·è€…çš„èº«ä»½è¿è¡Œï¼Œè¿›ç¨‹æ‰€èƒ½å¤Ÿè®¿é—®èµ„æºçš„æƒé™å–å†³äºè¿›ç¨‹çš„è¿è¡Œè€…çš„èº«ä»½\n\næ¯”å¦‚ï¼šåˆ†åˆ«ä»¥root å’Œwang çš„èº«ä»½è¿è¡Œ /bin/cat /etc/shadow ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„ï¼Œèµ„æºèƒ½å¦èƒ½è¢«è®¿é—®ï¼Œæ˜¯ç”±è¿è¡Œè€…çš„èº«ä»½å†³å®šï¼Œéç¨‹åºæœ¬èº«\n\nèŒƒä¾‹:\n\n```bash\n[wang@centos8 ~]$cat /etc/shadow\ncat: /etc/shadow: Permission denied\n[root@centos8 ~]#cat /etc/shadow\nroot:$6$zsrWEC56PrKifAEz$hylCuGySe.H6l6O2MRvbtqy/VZgnZbau.y57dE85.YHq03MTJVV4UvQ\nVIDcYA1IJzbgpWE0vTU.BtPHLbNBNn0:18246:0:99999:7:::\nbin:*:18027:0:99999:7:::\ndaemon:*:18027:0:99999:7:::\nadm:*:18027:0:99999:7:::\nlp:*:18027:0:99999:7:::\n```\n\n## **ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶**\n\n### **ç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶**\n\n```bash\n/etc/passwdï¼šç”¨æˆ·åŠå…¶å±æ€§ä¿¡æ¯(åç§°ã€UIDã€ä¸»ç»„IDç­‰ï¼‰\n/etc/shadowï¼šç”¨æˆ·å¯†ç åŠå…¶ç›¸å…³å±æ€§\n/etc/groupï¼šç»„åŠå…¶å±æ€§ä¿¡æ¯\n/etc/gshadowï¼šç»„å¯†ç åŠå…¶ç›¸å…³å±æ€§\n```\n\n### passwdæ–‡ä»¶æ ¼å¼\n\n```bash\nlogin nameï¼šç™»å½•ç”¨åï¼ˆwangï¼‰\npasswdï¼šå¯†ç  (x)\nUIDï¼šç”¨æˆ·èº«ä»½ç¼–å· (1000)\nGIDï¼šç™»å½•é»˜è®¤æ‰€åœ¨ç»„ç¼–å· (1000)\nGECOSï¼šç”¨æˆ·å…¨åæˆ–æ³¨é‡Š\nhome directoryï¼šç”¨æˆ·ä¸»ç›®å½• (/home/wang)\nshellï¼šç”¨æˆ·é»˜è®¤ä½¿ç”¨shell (/bin/bash)\n```\n\n### shadowæ–‡ä»¶æ ¼å¼\n\n```bash\nç™»å½•ç”¨å\nç”¨æˆ·å¯†ç :ä¸€èˆ¬ç”¨sha512åŠ å¯†\nä»1970å¹´1æœˆ1æ—¥èµ·åˆ°å¯†ç æœ€è¿‘ä¸€æ¬¡è¢«æ›´æ”¹çš„æ—¶é—´\nå¯†ç å†è¿‡å‡ å¤©å¯ä»¥è¢«å˜æ›´ï¼ˆ0è¡¨ç¤ºéšæ—¶å¯è¢«å˜æ›´ï¼‰\nå¯†ç å†è¿‡å‡ å¤©å¿…é¡»è¢«å˜æ›´ï¼ˆ99999è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼‰\nå¯†ç è¿‡æœŸå‰å‡ å¤©ç³»ç»Ÿæé†’ç”¨æˆ·ï¼ˆé»˜è®¤ä¸ºä¸€å‘¨ï¼‰\nå¯†ç è¿‡æœŸå‡ å¤©åå¸å·ä¼šè¢«é”å®š\nä»1970å¹´1æœˆ1æ—¥ç®—èµ·ï¼Œå¤šå°‘å¤©åå¸å·å¤±æ•ˆ\n```\n\næ›´æ”¹å¯†ç åŠ å¯†ç®—æ³•ï¼š\n\n```bash\nauthconfig  --passalgo=sha256 --update\n```\n\nå¯†ç çš„å®‰å…¨ç­–ç•¥\n\n- è¶³å¤Ÿé•¿\n- ä½¿ç”¨æ•°å­—ã€å¤§å†™å­—æ¯ã€å°å†™å­—æ¯åŠç‰¹æ®Šå­—ç¬¦ä¸­è‡³å°‘3ç§\n- ä½¿ç”¨éšæœºå¯†ç \n- å®šæœŸæ›´æ¢,ä¸è¦ä½¿ç”¨æœ€è¿‘æ›¾ç»ä½¿ç”¨è¿‡çš„å¯†ç \n\nèŒƒä¾‹ï¼šç”Ÿæˆéšæœºå¯†ç \n\n[:alnum:] ï¼šä»»æ„æ•°å­—æˆ–å­—æ¯\n\n```bash\n[root@centos8 ~]#tr -dc '[:alnum:]' < /dev/urandom | head -c 12\nsFg6C8g5FAfe\n[root@centos8 ~]#openssl rand -base64 9\nhvMkPmAyIrXMQInt\n#ç”Ÿæˆéšæœºå¯†ç \n[root@centos8 ~]#yum -y install expect\n[root@centos8 ~]#mkpasswd -l 8 -c 2 -C 2 -d 2 -s 2 \n#ç”Ÿæˆéšæœºå¯†ç æ€ç½‘ç«™ï¼š\nhttps://suijimimashengcheng.51240.com/\n```\n\n### groupæ–‡ä»¶æ ¼å¼\n\n```bash\nç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤ç»„åç§°\nç¾¤ç»„å¯†ç ï¼šé€šå¸¸ä¸éœ€è¦è®¾å®šï¼Œå¯†ç æ˜¯è¢«è®°å½•åœ¨ /etc/gshadow \nGIDï¼šå°±æ˜¯ç¾¤ç»„çš„ ID \nä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨(åˆ†éš”ç¬¦ä¸ºé€—å·)\n```\n\n### gshdowæ–‡ä»¶æ ¼å¼\n\n```bash\nç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤çš„åç§°\nç¾¤ç»„å¯†ç ï¼š\nç»„ç®¡ç†å‘˜åˆ—è¡¨ï¼šç»„ç®¡ç†å‘˜çš„åˆ—è¡¨ï¼Œæ›´æ”¹ç»„å¯†ç å’Œæˆå‘˜\nä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨ï¼šå¤šä¸ªç”¨æˆ·é—´ç”¨é€—å·åˆ†éš”\n```\n\n### **æ–‡ä»¶æ“ä½œ**\n\n```bash\nvipwå’Œvigr\npwckå’Œgrpck\n```\n\n## **ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤**\n\n```bash\n#ç”¨æˆ·ç®¡ç†å‘½ä»¤\n  useradd\n  usermod\n  userdel\n#ç»„å¸å·ç»´æŠ¤å‘½ä»¤\n  groupadd\n  groupmod\n  groupdel\n```\n\n### **ç”¨æˆ·åˆ›å»º**\n\nuseradd å‘½ä»¤å¯ä»¥åˆ›å»ºæ–°çš„Linuxç”¨æˆ·\n\næ ¼å¼ï¼šuseradd [options] LOGIN\n\né€‰é¡¹ï¼š\n\n```bash\n-u UID \n-o é…åˆ-u é€‰é¡¹ï¼Œä¸æ£€æŸ¥UIDçš„å”¯ä¸€æ€§\n-g GID æŒ‡æ˜ç”¨æˆ·æ‰€å±åŸºæœ¬ç»„ï¼Œå¯ä¸ºç»„åï¼Œä¹Ÿå¯ä»¥GID\n-c \"COMMENTâ€œ ç”¨æˆ·çš„æ³¨é‡Šä¿¡æ¯\n-d HOME_DIR ä»¥æŒ‡å®šçš„è·¯å¾„(ä¸å­˜åœ¨)ä¸ºå®¶ç›®å½•\n-s SHELL æŒ‡æ˜ç”¨æˆ·çš„é»˜è®¤shellç¨‹åºï¼Œå¯ç”¨åˆ—è¡¨åœ¨/etc/shellsæ–‡ä»¶ä¸­\n-G GROUP1[,GROUP2,...] ä¸ºç”¨æˆ·æŒ‡æ˜é™„åŠ ç»„ï¼Œç»„é¡»äº‹å…ˆå­˜åœ¨\n-N ä¸åˆ›å»ºç§ç”¨ç»„åšä¸»ç»„ï¼Œä½¿ç”¨usersç»„åšä¸»ç»„\n-r åˆ›å»ºç³»ç»Ÿç”¨æˆ· CentOS 6ä¹‹å‰: ID<500ï¼ŒCentOS7 ä»¥å: ID<1000\n-m åˆ›å»ºå®¶ç›®å½•ï¼Œç”¨äºç³»ç»Ÿç”¨æˆ·\n-M ä¸åˆ›å»ºå®¶ç›®å½•ï¼Œç”¨äºéç³»ç»Ÿç”¨æˆ·\n-p æŒ‡å®šåŠ å¯†çš„å¯†ç \n```\n\nèŒƒä¾‹:\n\n```bash\nuseradd -r -u 48 -g apache -s /sbin/nologin -d /var/www -c \"Apache\" apache\n```\n\nuseradd å‘½ä»¤é»˜è®¤å€¼è®¾å®šç”±/etc/default/useraddå®šä¹‰\n\n```bash\n[root@centos8 ~]#cat /etc/default/useradd\n# useradd defaults file\nGROUP=100\nHOME=/home\nINACTIVE=-1  #å¯¹åº”/etc/shadowæ–‡ä»¶ç¬¬7åˆ—ï¼Œå³ç”¨æˆ·å¯†ç è¿‡æœŸåçš„å¸å·é”å®šçš„å®½é™æœŸ,-1è¡¨ç¤ºä¸é”å®š\nEXPIRE=    #å¯¹åº”/etc/shadowæ–‡ä»¶ç¬¬8åˆ—ï¼Œå³ç”¨æˆ·å¸å·çš„æœ‰æ•ˆæœŸ\nSHELL=/bin/bash\nSKEL=/etc/skel #ç”¨äºç”Ÿæˆæ–°å»ºç”¨æˆ·å®¶ç›®å½•çš„æ¨¡ç‰ˆæ–‡ä»¶\nCREATE_MAIL_SPOOL=yes\n```\n\næ˜¾ç¤ºæˆ–æ›´æ”¹é»˜è®¤è®¾ç½®\n\n```bash\nuseradd -D \nuseradd â€“D -s SHELL\nuseradd â€“D â€“b BASE_DIR\nuseradd â€“D â€“g GROUP\n```\n\næ–°å»ºç”¨æˆ·çš„ç›¸å…³æ–‡ä»¶\n\n- /etc/default/useradd \n- /etc/skel/* \n- /etc/login.defs\n\næ‰¹é‡åˆ›å»ºç”¨æˆ·\n\n```bash\nnewusers passwd æ ¼å¼æ–‡ä»¶ \n```\n\næ‰¹é‡ä¿®æ”¹ç”¨æˆ·å£ä»¤\n\n```bash\necho username:passwd | chpasswd\n```\n\nèŒƒä¾‹: CentOS8 ç”Ÿæˆsha512åŠ å¯†å¯†\n\n```bash\n[root@192 ~]# openssl passwd -6 123456\n$6$BDS.Zas72d3VXaZL$thfW6W6SrwfhlCoEh/o45G.icd.a.HY3q/mwxdIU.wOp2ELiRN5YPMwORAWNCYFdLU7b9rkxUEUFqV7aqJjOL/\n```\n\nèŒƒä¾‹: CentOS7 åˆ©ç”¨Pythonç¨‹åºåœ¨ ç”Ÿæˆsha512åŠ å¯†å¯†ç \n\n```bash\n[root@centos7 ~]#python -c 'import \ncrypt,getpass;pw=\"magedu\";print(crypt.crypt(pw))'\n$6$pt0SFMf6YqKea3mh$.7Hkslg17uI.Wu7BcMJStVVtkzrwktXrOC8DxcMFC4JO1igrqR7VAi87H5PH\nOuLTUEjl7eJqKUhMT1e9ixojn1\n```\n\n### **ç”¨æˆ·å±æ€§ä¿®æ”¹**\n\nusermod å‘½ä»¤å¯ä»¥ä¿®æ”¹ç”¨æˆ·å±æ€§\n\n```bash\n#æ ¼å¼\nusermod [OPTION] login\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-u UID: æ–°UID\n-g GID: æ–°ä¸»ç»„\n-G GROUP1[,GROUP2,...[,GROUPN]]]ï¼šæ–°é™„åŠ ç»„ï¼ŒåŸæ¥çš„é™„åŠ ç»„å°†ä¼šè¢«è¦†ç›–ï¼›è‹¥ä¿ç•™åŸæœ‰ï¼Œåˆ™è¦åŒæ—¶ä½¿\nç”¨-aé€‰é¡¹\n-s SHELLï¼šæ–°çš„é»˜è®¤SHELL\n-c 'COMMENT'ï¼šæ–°çš„æ³¨é‡Šä¿¡æ¯\n-d HOME: æ–°å®¶ç›®å½•ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼›è‹¥è¦åˆ›å»ºæ–°å®¶ç›®å½•å¹¶ç§»åŠ¨åŸå®¶æ•°æ®ï¼ŒåŒæ—¶ä½¿ç”¨-mé€‰é¡¹\n-l login_name: æ–°çš„åå­—\n-L: lockæŒ‡å®šç”¨æˆ·,åœ¨/etc/shadow å¯†ç æ çš„å¢åŠ  ! \n-U: unlockæŒ‡å®šç”¨æˆ·,å°† /etc/shadow å¯†ç æ çš„ ! æ‹¿æ‰\n-e YYYY-MM-DD: æŒ‡æ˜ç”¨æˆ·è´¦å·è¿‡æœŸæ—¥æœŸ\n-f INACTIVE: è®¾å®šéæ´»åŠ¨æœŸé™ï¼Œå³å®½é™æœŸ\n```\n\n### **åˆ é™¤ç”¨æˆ·**\n\nuserdel å¯åˆ é™¤Linux ç”¨æˆ·\n\n```bash\n#æ ¼å¼\nuserdel [OPTION]... Login\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-f, --force  å¼ºåˆ¶\n-r, --remove åˆ é™¤ç”¨æˆ·å®¶ç›®å½•å’Œé‚®ç®±\n```\n\nèŒƒä¾‹: å¼ºåˆ¶åˆ é™¤ç”¨æˆ·å’Œæ•°æ®\n\n```bash\n[root@centos8 ~]#useradd test\n[root@centos8 ~]#id test\nuid=1001(test) gid=1001(test) groups=1001(test)\n#åœ¨å¦ä¸€ç»ˆç«¯ç”¨testç™»å½•\n[root@centos8 ~]#su - test\n[test@centos8 ~]$\n#åˆ é™¤æ­£åœ¨ç™»å½•çš„ç”¨æˆ·å¤±è´¥\n[root@centos8 ~]#userdel -r test\nuserdel: user test is currently used by process 29909\n[root@centos8 ~]#id test\nuid=1001(test) gid=1001(test) groups=1001(test)\n#å¼ºåˆ¶åˆ é™¤ç”¨æˆ·\n[root@centos8 ~]#userdel -rf test\nuserdel: user test is currently used by process 29909\n[root@centos8 ~]#id test\nid: â€˜testâ€™: no such user\n```\n\n### æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯\n\nid å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç”¨æˆ·çš„UIDï¼ŒGIDç­‰ä¿¡æ¯\n\næ ¼å¼ï¼š\n\n```bash\nid [OPTION]... [USER]\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-u: æ˜¾ç¤ºUID\n-g: æ˜¾ç¤ºGID\n-G: æ˜¾ç¤ºç”¨æˆ·æ‰€å±çš„ç»„çš„ID\n-n: æ˜¾ç¤ºåç§°ï¼Œéœ€é…åˆugGä½¿ç”¨\n```\n\n### **åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤**\n\nsu: å³ switch userï¼Œå‘½ä»¤å¯ä»¥åˆ‡æ¢ç”¨æˆ·èº«ä»½ï¼Œå¹¶ä¸”ä»¥æŒ‡å®šç”¨æˆ·çš„èº«ä»½æ‰§è¡Œå‘½ä»¤\n\næ ¼å¼ï¼š\n\n```bash\nsu [options...] [-] [user [args...]]\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-l --login  su -l UserName  ç›¸å½“äº su - UserName\n-c, --command <command>     pass a single command to the shell with -c\n```\n\nåˆ‡æ¢ç”¨æˆ·çš„æ–¹å¼ï¼š\n\n- su UserNameï¼šéç™»å½•å¼åˆ‡æ¢ï¼Œå³ä¸ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œä¸æ”¹å˜å½“å‰å·¥ä½œç›®å½•ï¼Œå³ä¸å®Œå…¨åˆ‡æ¢\n- su `-` UserNameï¼šç™»å½•å¼åˆ‡æ¢ï¼Œä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œåˆ‡æ¢è‡³è‡ªå·²çš„å®¶ç›®å½•ï¼Œå³å®Œå…¨åˆ‡æ¢\n\nè¯´æ˜ï¼šroot suè‡³å…¶ä»–ç”¨æˆ·æ— é¡»å¯†ç ï¼›érootç”¨æˆ·åˆ‡æ¢æ—¶éœ€è¦å¯†ç \n\næ³¨æ„ï¼šsu åˆ‡æ¢æ–°ç”¨æˆ·åï¼Œä½¿ç”¨ `exit` é€€å›è‡³æ—§çš„ç”¨æˆ·èº«ä»½ï¼Œè€Œä¸è¦å†ç”¨ su åˆ‡æ¢è‡³æ—§ç”¨æˆ·ï¼Œå¦åˆ™ä¼šç”Ÿæˆå¾ˆå¤šçš„bashå­è¿›ç¨‹ï¼Œç¯å¢ƒå¯èƒ½ä¼šæ··ä¹±ã€‚\n\næ¢ä¸ªèº«ä»½æ‰§è¡Œå‘½ä»¤ï¼š\n\n```bash\nsu [-] UserName -c 'COMMAND'\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#getent passwd mage\nmage:x:1001:1001::/home/mage:/bin/bash\n[root@centos8 ~]#usermod -s /bin/false mage\n[root@centos8 ~]#getent passwd mage\nmage:x:1001:1001::/home/mage:/bin/false\n[root@centos8 ~]#su - mage\nLast login: Fri Mar 27 09:18:57 CST 2020 on pts/0\n[root@centos8 ~]#whoami\nroot\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#su -s /sbin/nologin wang\nThis account is currently not available.\n[root@centos8 ~]#whoami\nroot\n[root@centos8 ~]#su -s /bin/false wang\n[root@centos8 ~]#whoami\nroot\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[wang@centos8 ~]$su - root -c \"getent shadow\"\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@192 ~]# su - wang -c 'touch wang.txt'\n[root@192 ~]# ll /home/wang/\ntotal 0\n-rw-r--r-- 1 wang wang 0 Jul  2 17:49 wang.txt\n\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#su bin\nThis account is currently not available.\n[root@centos8 ~]#su -s /bin/bash bin\nbash-4.4$ whoami\nbin\nbash-4.4$\n[root@centos8 ~]#getent passwd tss\ntss:x:59:59:Account used by the trousers package to sandbox the tcsd \ndaemon:/dev/null:/sbin/nologin\n[root@centos8 ~]#su - -s /bin/bash tss\nLast login: Fri Mar 27 09:46:43 CST 2020 on pts/0\nsu: warning: cannot change directory to /dev/null: Not a directory\n-bash: /dev/null/.bash_profile: Not a directory\n[tss@centos8 root]$pwd\n/root\n[tss@centos8 root]$whoami\ntss\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#getent passwd bin\nbin:x:1:1:bin:/bin:/sbin/nologin\n[root@centos8 ~]#su -c 'whoami' bin\nnologin: invalid option -- 'c'\nTry 'nologin --help' for more information.\n[root@centos8 ~]#su -s /bin/bash -c 'whoami' bin\nbin\n```\n\n### è®¾ç½®å¯†ç \n\n![Snipaste_2025-07-02_17-52-50](%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84%E5%92%8C%E6%9D%83%E9%99%90.assets/Snipaste_2025-07-02_17-52-50.png)\n\npasswd å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç \n\næ ¼å¼ï¼š\n\n```bash\npasswd [OPTIONS] UserName\n```\n\nå¸¸ç”¨é€‰é¡¹ï¼š\n\n```bash\n-dï¼šåˆ é™¤æŒ‡å®šç”¨æˆ·å¯†ç \n-lï¼šé”å®šæŒ‡å®šç”¨æˆ·\n-uï¼šè§£é”æŒ‡å®šç”¨æˆ·\n-eï¼šå¼ºåˆ¶ç”¨æˆ·ä¸‹æ¬¡ç™»å½•ä¿®æ”¹å¯†ç \n-fï¼šå¼ºåˆ¶æ“ä½œ\n-n mindaysï¼šæŒ‡å®šæœ€çŸ­ä½¿ç”¨æœŸé™\n-x maxdaysï¼šæœ€å¤§ä½¿ç”¨æœŸé™\n-w warndaysï¼šæå‰å¤šå°‘å¤©å¼€å§‹è­¦å‘Š\n-i inactivedaysï¼šéæ´»åŠ¨æœŸé™\n--stdinï¼šä»æ ‡å‡†è¾“å…¥æ¥æ”¶ç”¨æˆ·å¯†ç ,Ubuntuæ— æ­¤é€‰é¡¹\n```\n\nèŒƒä¾‹ï¼šéäº¤äº’å¼ä¿®æ”¹ç”¨æˆ·å¯†ç \n\n```bash\n#æ­¤æ–¹å¼æ›´é€šç”¨ï¼Œé€‚ç”¨äºå„ç§Linuxç‰ˆæœ¬ï¼Œå¦‚:ubuntu\n[root@192 ~]# echo -e '123456\\n123456' | passwd wang\nChanging password for user wang.\nNew password: BAD PASSWORD: The password is shorter than 8 characters\nRetype new password: passwd: all authentication tokens updated successfully.\n#é€‚ç”¨äºçº¢å¸½ç³»åˆ—çš„Linuxç‰ˆæœ¬\n[root@centos8 ~]#echo '123456' | passwd --stdin mage\nChanging password for user mage.\npasswd: all authentication tokens updated successfully.\n#ç”Ÿæˆéšæœºå¯†ç \n[root@centos8 ~]#yum -y install expect\n[root@centos8 ~]#mkpasswd -l 8 -c 2 -C 2 -d 2 -s 2 |tee passwd.txt | passwd --\nstdin wang\nChanging password for user wang.\npasswd: all authentication tokens updated successfully.\n[root@centos8 ~]#cat passwd.txt \n1Q!9Lnl]\n```\n\nèŒƒä¾‹: Ubuntu éäº¤äº’å¼ä¿®æ”¹ç”¨æˆ·å¯†ç \n\n```bash\n[root@ubuntu1804 ~]#echo wang:centos |chpasswd\n[root@ubuntu1804 ~]#passwd wang <<EOF\ncentos\ncentos\nEOF\nEnter new UNIX password: Retype new UNIX password: passwd: password updated \nsuccessfully\n[root@ubuntu1804 ~]#echo -e 'magedu\\nmagedu' | passwd wang\nEnter new UNIX password: Retype new UNIX password: passwd: password updated \nsuccessfully\n```\n\nèŒƒä¾‹ï¼šè®¾ç½®ç”¨æˆ·ä¸‹æ¬¡å¿…é¡»æ›´æ”¹å¯†ç \n\n```bash\n[root@centos8 ~]#useradd wang\n[root@centos8 ~]#echo 123456 | passwd --stdin wang\nChanging password for user wang.\npasswd: all authentication tokens updated successfully.\n[root@centos8 ~]#getent shadow wang\nwang:$6$4f78ko7hJ4fcMvIH$lpbOkFfziDBLT.8XBCi8c/N7wysDAejN5H9Fgxkt99HRDLTEosO43CK\nYi2XSSVHxAK568Olj3C5bwfNExlves/:18348:0:99999:7:::\n[root@centos8 ~]#passwd -e wang\nExpiring password for user wang.\npasswd: Success\n[root@centos8 ~]#getent shadow wang\nwang:$6$4f78ko7hJ4fcMvIH$lpbOkFfziDBLT.8XBCi8c/N7wysDAejN5H9Fgxkt99HRDLTEosO43CK\nYi2XSSVHxAK568Olj3C5bwfNExlves/:0:0:99999:7:::\n[root@centos8 ~]#su - mage\nLast login: Fri Mar 27 09:55:27 CST 2020 on pts/0\n[mage@centos8 ~]$su - wang\nPassword:\nYou are required to change your password immediately (administrator enforced)\nCurrent password:\nNew password:\nBAD PASSWORD: The password is shorter than 8 characters\nNew password:\nBAD PASSWORD: The password fails the dictionary check - it is too \nsimplistic/systematic\nsu: Have exhausted maximum number of retries for service\n[mage@centos8 ~]$su - wang\nPassword:\nYou are required to change your password immediately (administrator enforced)\nCurrent password:\nNew password:\nRetype new password:\nLast login: Fri Mar 27 10:01:20 CST 2020 on pts/0\nLast failed login: Fri Mar 27 10:02:37 CST 2020 on pts/0\nThere was 1 failed login attempt since the last successful login.\n[wang@centos8 ~]$exit\nlogout\n[mage@centos8 ~]$exit\nlogout\n[root@centos8 ~]#getent shadow wang\nwang:$6$TX0iLjF52ByHh1zH$g.WI4LNfauuwgnxpRhd7ePqFKHZ85YU3r6Lh2S0PWRXWGjGlDVtomLW\nqpdiWrT.vwqD/Wzok.kzQhUHc8UCs91:18348:0:99999:7:::\n```\n\n### **ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥**\n\nchage å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥\n\næ ¼å¼ï¼š\n\n```bash\nchage [OPTION]... LOGIN\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-d LAST_DAY        #æ›´æ”¹å¯†ç çš„æ—¶é—´\n-m --mindays MIN_DAYS\n-M --maxdays MAX_DAYS\n-W --warndays WARN_DAYS\n-I --inactive INACTIVE #å¯†ç è¿‡æœŸåçš„å®½é™æœŸ\n-E --expiredate EXPIRE_DATE #ç”¨æˆ·çš„æœ‰æ•ˆæœŸ\n-l æ˜¾ç¤ºå¯†ç ç­–ç•¥\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#chage wang\nChanging the aging information for wang\nEnter the new value, or press ENTER for the default\n Minimum Password Age [0]: 3\n Maximum Password Age [99999]: 42\n Last Password Change (YYYY-MM-DD) [2021-03-14]: 2021-03-29    \n Password Expiration Warning [7]: 10\n Password Inactive [-1]: 20\n Account Expiration Date (YYYY-MM-DD) [-1]: 2022-03-29\n[root@centos8 ~]#getent shadow wang\nwang:$6$UpJNaaFGwCqFBSN9$MA4OMcJRJWbNPeMmQPvVjUcI4RYbGywipqYc9hlg87YUXvmpbi.Zcni\n8ktdzw/DuECug4IBoEC/yXYv7dknu/0:18715:3:42:10:20:19080:\n[root@centos8 ~]#chage -m 3 -M 42 -W 14 -I 7 -E 2020-10-10 wang\n[root@centos8 ~]#chage -l wang\nLast password change : Dec 18, 2019\nPassword expires : Jan 29, 2020\nPassword inactive : Feb 05, 2020\nAccount expires : Oct 10, 2020\nMinimum number of days between password change : 3\nMaximum number of days between password change : 42\nNumber of days of warning before password expires : 14\n[root@centos8 ~]#getent shadow wang\nwang:$6$82L7A37XJgzKTegH$lFzqrMHmFwW740U32bvWHUuakPDKOiULE/CxcyDzSe1qi1X2ALulDw1\nWYrhd2wE00.lWO0im5//7biyV.juk5.:18248:3:42:14:7:18545:\n#ä¸‹ä¸€æ¬¡ç™»å½•å¼ºåˆ¶é‡è®¾å¯†ç \n[root@centos8 ~]#chage -d 0 wang\n[root@centos8 ~]#getent shadow wang\nwang:$6$82L7A37XJgzKTegH$lFzqrMHmFwW740U32bvWHUuakPDKOiULE/CxcyDzSe1qi1X2ALulDw1\nWYrhd2wE00.lWO0im5//7biyV.juk5.:0:3:42:14:7:18545:\n[root@centos8 ~]#chage -l wang\nLast password change : password must be changed\nPassword expires : password must be changed\nPassword inactive : password must be changed\nAccount expires : Oct 10, 2020\nMinimum number of days between password change : 3\nMaximum number of days between password change : 42\nNumber of days of warning before password expires : 14\n[root@centos8 ~]#getent shadow wang\nwang:$6$82L7A37XJgzKTegH$lFzqrMHmFwW740U32bvWHUuakPDKOiULE/CxcyDzSe1qi1X2ALulDw1\nWYrhd2wE00.lWO0im5//7biyV.juk5.:0:3:42:14:7:18545:\n```\n\n### **åˆ›å»ºç»„**\n\ngroupaddå®ç°åˆ›å»ºç»„\n\n```bash\n#æ ¼å¼\ngroupadd [OPTION]... group_name\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-g GID æŒ‡æ˜GIDå·ï¼›[GID_MIN, GID_MAX]\n-r åˆ›å»ºç³»ç»Ÿç»„ï¼ŒCentOS 6ä¹‹å‰: ID<500ï¼ŒCentOS 7ä»¥å: ID<1000\n```\n\nèŒƒä¾‹:\n\n```bash\ngroupadd -g 48 -r apache\n```\n\n### **ä¿®æ”¹ç»„**\n\ngroupmod ç»„å±æ€§ä¿®æ”¹\n\næ ¼å¼ï¼š\n\n```bash\ngroupmod [OPTION]... group\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-n group_name: æ–°åå­—\n-g GID: æ–°çš„GID\n```\n\n### **ç»„åˆ é™¤**\n\ngroupdel å¯ä»¥åˆ é™¤ç»„\n\næ ¼å¼\n\n```bash\ngroupdel [options] GROUP\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-f, --force å¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿æ˜¯ç”¨æˆ·çš„ä¸»ç»„ä¹Ÿå¼ºåˆ¶åˆ é™¤ç»„,ä½†ä¼šå¯¼è‡´æ— ä¸»ç»„çš„ç”¨æˆ·ä¸å¯ç”¨æ— æ³•ç™»å½•\n```\n\n### **æ›´æ”¹ç»„æˆå‘˜å’Œå¯†ç **\n\ngpasswdå‘½ä»¤ï¼Œå¯ä»¥æ›´æ”¹ç»„å¯†ç ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹é™„åŠ ç»„çš„æˆå‘˜å…³ç³»\n\næ ¼å¼\n\n```bash\ngpasswd [OPTION] GROUP\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-a user å°†useræ·»åŠ è‡³æŒ‡å®šç»„ä¸­\n-d user ä»æŒ‡å®šé™„åŠ ç»„ä¸­ç§»é™¤ç”¨æˆ·user\n-A user1,user2,... è®¾ç½®æœ‰ç®¡ç†æƒé™çš„ç”¨æˆ·åˆ—è¡¨\n```\n\nèŒƒä¾‹:\n\n```bash\n#å¢åŠ ç»„æˆå‘˜\n[root@centos8 ~]#groupadd admins\n[root@centos8 ~]#id wang\nuid=1000(wang) gid=1000(wang) groups=1000(wang)\n[root@centos8 ~]#gpasswd -a wang admins\nAdding user wang to group admins\n[root@centos8 ~]#id wang\nuid=1000(wang) gid=1000(wang) groups=1000(wang),1002(admins)\n[root@centos8 ~]#groups wang\nwang : wang admins\n[root@centos8 ~]#getent group admins\nadmins:x:1002:wang\n#åˆ é™¤ç»„æˆå‘˜\n[root@centos8 ~]#gpasswd -d wang admins\nRemoving user wang from group admins\n[root@centos8 ~]#groups wang\nwang : wang\n[root@centos8 ~]#id wang\nuid=1000(wang) gid=1000(wang) groups=1000(wang)\n[root@centos8 ~]#getent group admins\nadmins:x:1002:\n```\n\n### **æ›´æ”¹å’ŒæŸ¥çœ‹ç»„æˆå‘˜**\n\ngroupmems å¯ä»¥ç®¡ç†é™„åŠ ç»„çš„æˆå‘˜å…³ç³»\n\næ ¼å¼\n\n```bash\ngroupmems [options] [action]\n```\n\nå¸¸è§é€‰é¡¹ï¼š\n\n```bash\n-g, --group groupname  #æ›´æ”¹ä¸ºæŒ‡å®šç»„ (åªæœ‰root)\n-a, --add username   #æŒ‡å®šç”¨æˆ·åŠ å…¥ç»„\n-d, --delete username #ä»ç»„ä¸­åˆ é™¤ç”¨æˆ·\n-p, --purge        #ä»ç»„ä¸­æ¸…é™¤æ‰€æœ‰æˆå‘˜\n-l, --list         #æ˜¾ç¤ºç»„æˆå‘˜åˆ—è¡¨\n```\n\ngroups å¯æŸ¥çœ‹ç”¨æˆ·ç»„å…³ç³»\n\næ ¼å¼\n\n```bash\n#æŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„åˆ—è¡¨\ngroups [OPTION].[USERNAME]...\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 ~]#groupmems -l -g admins\n[root@centos8 ~]#groupmems -a mage -g admins\n[root@centos8 ~]#id mage\nuid=1001(mage) gid=1001(mage) groups=1001(mage),1002(admins)\n[root@centos8 ~]#groupmems -l -g admins\nmage \n[root@centos8 ~]#groupmems -a wang -g admins\n[root@centos8 ~]#groupmems -l -g admins\nmage wang \n[root@centos8 ~]#groupmems -d wang -g admins\n[root@centos8 ~]#groups wang\nwang : wang\n[root@centos8 ~]#groupmems -l -g admins\nmage \n[root@centos8 ~]#groupmems -p -g admins\n[root@centos8 ~]#groupmems -l -g admins\n```\n\n### **ç»ƒä¹ **\n\n1. åˆ›å»ºç”¨æˆ·gentooï¼Œé™„åŠ ç»„ä¸ºbinå’Œrootï¼Œé»˜è®¤shellä¸º/bin/cshï¼Œæ³¨é‡Šä¿¡æ¯ä¸º\"Gentoo Distribution\"\n\n```bash\n[root@192 ~]# useradd -G bin,root -s /bin/csh -c \"Gentoo Distribution\" gentoo\nuseradd: Warning: missing or non-executable shell '/bin/csh'\n[root@192 ~]# id gentoo\nuid=1004(gentoo) gid=1004(gentoo) groups=1004(gentoo),0(root),1(bin)\n[root@192 ~]# cat /etc/passwd | grep gentoo\ngentoo:x:1004:1004:Gentoo Distribution:/home/gentoo:/bin/csh\n```\n\n2. åˆ›å»ºä¸‹é¢çš„ç”¨æˆ·ã€ç»„å’Œç»„æˆå‘˜å…³ç³»\n   åå­—ä¸ºwebs çš„ç»„\n     ç”¨æˆ·nginxï¼Œä½¿ç”¨webs ä½œä¸ºé™„åŠ ç»„\n     ç”¨æˆ·varnishï¼Œä½¿ç”¨webs ä½œä¸ºé™„åŠ ç»„\n     ç”¨æˆ·mysqlï¼Œä¸å¯äº¤äº’ç™»å½•ç³»ç»Ÿï¼Œä¸”ä¸æ˜¯webs çš„æˆå‘˜ï¼Œnginxï¼Œvarnishï¼Œmysqlå¯†ç éƒ½æ˜¯123456\n\n```bash\ngroupadd webs\nuseradd -G webs nginx\nuseradd -G webs varnish\nuseradd -s /sbin/nologin mysql\necho 123456 | passwd --stdin nginx\necho 123456 | passwd --stdin varnish\necho 123456 | passwd --stdin mysql\n```\n\n## **æ–‡ä»¶æƒé™ç®¡ç†**\n\nç¨‹åºè®¿é—®æ–‡ä»¶æ—¶çš„æƒé™ï¼Œå–å†³äºæ­¤ç¨‹åºçš„å‘èµ·è€…\n\n- è¿›ç¨‹çš„å‘èµ·è€…ï¼ŒåŒæ–‡ä»¶çš„å±ä¸»ï¼šåˆ™åº”ç”¨æ–‡ä»¶å±ä¸»æƒé™\n- è¿›ç¨‹çš„å‘èµ·è€…ï¼Œå±äºæ–‡ä»¶å±ç»„ï¼›åˆ™åº”ç”¨æ–‡ä»¶å±ç»„æƒé™\n- åº”ç”¨æ–‡ä»¶â€œå…¶å®ƒâ€æƒé™\n\n![image-20250702182635536](%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84%E5%92%8C%E6%9D%83%E9%99%90.assets/image-20250702182635536.png)\n\n### **æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ**\n\n#### è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown\n\nchown å‘½ä»¤å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±ç»„\n\næ ¼å¼\n\n```bash\nchown [OPTION]... [OWNER][:[GROUP]] FILE...\nchown [OPTION]... --reference=RFILE FILE...\n```\n\nç”¨æ³•è¯´æ˜ï¼š\n\n```bash\nOWNER  #åªä¿®æ”¹æ‰€æœ‰è€…\nOWNER:GROUP #åŒæ—¶ä¿®æ”¹æ‰€æœ‰è€…å’Œå±ç»„\n:GROUP  #åªä¿®æ”¹å±ç»„ï¼Œå†’å·ä¹Ÿå¯ç”¨ . æ›¿æ¢\n--reference=RFILE #å‚è€ƒæŒ‡å®šçš„çš„å±æ€§ï¼Œæ¥ä¿®æ”¹  \n-R #é€’å½’ï¼Œæ­¤é€‰é¡¹æ…ç”¨ï¼Œéå¸¸å±é™©ï¼\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 data]#cp /etc/fstab f1.txt\n[root@centos8 data]#pwd\n/data\n[root@centos8 data]#ll\ntotal 4\n-rw-r--r-- 1 root root 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#chown wang f1.txt\n[root@centos8 data]#ll\ntotal 4\n-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#chown :admins f1.txt\n[root@centos8 data]#ll f1.txt\n-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#chown root.bin f1.txt\n[root@centos8 data]#ll \ntotal 4\n-rw-r--r-- 1 root bin 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#chown wang:admins f1.txt\n[root@centos8 data]#ll\ntotal 4\n-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#cp /etc/issue f2.txt\n[root@centos8 data]#ll\ntotal 8\n-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt\n-rw-r--r-- 1 root root  23 Dec 18 10:15 f2.txt\n[root@centos8 data]#chown --reference=f1.txt f2.txt\n[root@centos8 data]#ll\ntotal 8\n-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt\n-rw-r--r-- 1 wang admins 23 Dec 18 10:15 f2.txt\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#chown -R wang.admins /data/\n```\n\n#### è®¾ç½®æ–‡ä»¶çš„å±ç»„ä¿¡æ¯chgrp\n\nchgrp å‘½ä»¤å¯ä»¥åªä¿®æ”¹æ–‡ä»¶çš„å±ç»„\n\næ ¼å¼\n\n```bash\nchgrp [OPTION]... GROUP FILE...\nchgrp [OPTION]... --reference=RFILE FILE...\n```\n\n-R é€’å½’\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 data]#ll f1.txt\n-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt\n[root@centos8 data]#chgrp admins f1.txt \n[root@centos8 data]#ll f1.txt\n-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt\n```\n\n### **æ–‡ä»¶æƒé™**\n\n#### **æ–‡ä»¶æƒé™è¯´æ˜**\n\næ–‡ä»¶çš„æƒé™ä¸»è¦é’ˆå¯¹ä¸‰ç±»å¯¹è±¡è¿›è¡Œå®šä¹‰\n\n```bash\nowner å±ä¸», u\ngroup å±ç»„, g\nother å…¶ä»–, o\n```\n\næ³¨æ„ï¼š\n\n```bash\nç”¨æˆ·çš„æœ€ç»ˆæƒé™ï¼Œæ˜¯ä»å·¦å‘å³è¿›è¡Œé¡ºåºåŒ¹é…ï¼Œå³ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œå…¶ä»–äººï¼Œä¸€æ—¦åŒ¹é…æƒé™ç«‹å³ç”Ÿæ•ˆï¼Œä¸å†å‘\nå³æŸ¥çœ‹å…¶æƒé™\nrå’Œwæƒé™å¯¹root ç”¨æˆ·æ— æ•ˆ\nåªè¦æ‰€æœ‰è€…,æ‰€å±ç»„æˆ–otherä¸‰è€…ä¹‹ä¸€æœ‰xæƒé™,rootå°±å¯ä»¥æ‰§è¡Œ\n```\n\næ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§å¸¸ç”¨æƒé™\n\næ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§æƒé™\n\n```bash\nr Readable 4\nw Writable 2\nx eXcutable 1\n```\n\n**å¯¹æ–‡ä»¶çš„æƒé™ï¼š**\n\n```bash\nr å¯ä½¿ç”¨æ–‡ä»¶æŸ¥çœ‹ç±»å·¥å…·ï¼Œæ¯”å¦‚ï¼šcatï¼Œå¯ä»¥è·å–å…¶å†…å®¹\nw å¯ä¿®æ”¹å…¶å†…å®¹,æ–‡ä»¶çš„æ˜¯å¦è¢«åˆ é™¤å’Œæ–‡ä»¶çš„æƒé™æ— å…³\nx å¯ä»¥æŠŠæ­¤æ–‡ä»¶æè¯·å†…æ ¸å¯åŠ¨ä¸ºä¸€ä¸ªè¿›ç¨‹ï¼Œå³å¯ä»¥æ‰§è¡Œï¼ˆè¿è¡Œï¼‰æ­¤æ–‡ä»¶ï¼ˆæ­¤æ–‡ä»¶çš„å†…å®¹å¿…é¡»æ˜¯å¯æ‰§è¡Œï¼‰\næ–‡ä»¶æƒé™å¸¸è§ç»„åˆ\n--- 0\nr  4\nr-x 5 \nrw 6\nrwx 7\n```\n\n**å¯¹ç›®å½•çš„æƒé™ï¼š**\n\n```bash\nr å¯ä»¥ä½¿ç”¨lsæŸ¥çœ‹æ­¤ç›®å½•ä¸­æ–‡ä»¶ååˆ—è¡¨,ä½†æ— æ³•çœ‹åˆ°æ–‡ä»¶çš„å±æ€§metaä¿¡æ¯,åŒ…æ‹¬inodeå·,ä¸èƒ½æŸ¥çœ‹æ–‡ä»¶çš„\nå†…å®¹\nw å¯åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œä¹Ÿå¯åˆ é™¤æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œè€Œå’Œæ­¤è¢«åˆ é™¤çš„æ–‡ä»¶çš„æƒé™æ— å…³\nx å¯ä»¥cdè¿›å…¥æ­¤ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ls -l fileæˆ–stat file æŸ¥çœ‹æ­¤ç›®å½•ä¸­æŒ‡å®šæ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œå½“é¢„å…ˆçŸ¥\né“æ–‡ä»¶åç§°æ—¶,ä¹Ÿå¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹,å±äºç›®å½•çš„å¯è®¿é—®çš„æœ€å°æƒé™\nX åˆ†é…ç»™ç›®å½•æˆ–æœ‰éƒ¨åˆ†xæƒé™çš„æ–‡ä»¶çš„xæƒé™ï¼Œå¯¹æ— ä»»æ„xæƒé™çš„æ–‡ä»¶åˆ™ä¸ä¼šåˆ†é…xæƒé™\nç›®å½•æƒé™å¸¸è§ç»„åˆ\n-  ä¸èƒ½è®¿é—®ç›®å½•\nr-x åªè¯»ç›®å½•\nrwx å¯è¯»ä¹Ÿå¯å†™ç›®å½•\n```\n\né¢è¯•é¢˜ï¼š\n\n```bash\nLinuxä¸­çš„ç›®å½•å’Œæ–‡ä»¶çš„æƒé™åŒºåˆ«ï¼Ÿåˆ†åˆ«è¯´æ˜è¯»ï¼Œå†™å’Œæ‰§è¡Œæƒé™çš„åŒºåˆ«\n```\n\næ–‡ä»¶æƒé™ï¼š\n\n1. **è¯»ï¼ˆrï¼‰**ï¼šå…è®¸æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚\n2. **å†™ï¼ˆwï¼‰**ï¼šå…è®¸ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚\n3. **æ‰§è¡Œï¼ˆxï¼‰**ï¼šå…è®¸è¿è¡Œæ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶æ˜¯å¯æ‰§è¡Œç¨‹åºæˆ–è„šæœ¬ï¼‰ã€‚\n\nç›®å½•æƒé™ï¼š\n\n1. **è¯»ï¼ˆrï¼‰**ï¼šå…è®¸æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨ã€‚\n2. **å†™ï¼ˆwï¼‰**ï¼šå…è®¸åœ¨ç›®å½•ä¸­åˆ›å»ºã€åˆ é™¤æ–‡ä»¶æˆ–å­ç›®å½•ã€‚\n3. **æ‰§è¡Œï¼ˆxï¼‰**ï¼šå…è®¸è¿›å…¥ç›®å½•ï¼ˆå³è®¿é—®ç›®å½•å†…å®¹ï¼‰ã€‚\n\næ€»ç»“æ¥è¯´ï¼Œæ–‡ä»¶çš„æ‰§è¡Œæƒé™ç”¨äºè¿è¡Œæ–‡ä»¶ï¼Œè€Œç›®å½•çš„æ‰§è¡Œæƒé™ç”¨äºè®¿é—®ç›®å½•\n\n![image-20250702184153223](%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84%E5%92%8C%E6%9D%83%E9%99%90.assets/image-20250702184153223.png)\n\nå…«è¿›åˆ¶æ•°å­—\n\n```bash\n--- 000 0\n--x 001 1\n-w- 010 2\n-wx 011 3\nr-- 100 4\nr-x 101 5\nrw- 110 6\nrwx 111 7\n```\n\nä¾‹å¦‚ï¼š\n\n```bash\nrw-r----- 640 \nrwxr-xr-x 755\n```\n\n#### ä¿®æ”¹æ–‡ä»¶æƒé™chmod\n\næ ¼å¼\n\n```bash\nchmod [OPTION]... MODE[,MODE]... FILE...\nchmod [OPTION]... OCTAL-MODE FILE...\n#å‚è€ƒRFILEæ–‡ä»¶çš„æƒé™ï¼Œå°†FILEçš„ä¿®æ”¹ä¸ºåŒRFILE\nchmod [OPTION]... --reference=RFILE FILE...\n```\n\nè¯´æ˜ï¼š æ¨¡å¼æ³•æ ¼å¼\n\n```bash\nMODEï¼šwho opt permission\nwho:u,g,o,a \nopt:+,-,=\npermission:r,w,x\nä¿®æ”¹æŒ‡å®šä¸€ç±»ç”¨æˆ·çš„æ‰€æœ‰æƒé™\nu= g= o= ug= a= u=,g=\nä¿®æ”¹æŒ‡å®šä¸€ç±»ç”¨æˆ·æŸä¸ªæˆ–æŸä¸ªæƒé™\nu+ u- g+ g- o+ o- a+ a- + -\n-R: é€’å½’ä¿®æ”¹æƒé™\n```\n\nèŒƒä¾‹: è®¾ç½® X æƒé™\n\n```bash\n[root@centos8 data]#ll dir\ntotal 8\n-rw-r--r-- 1 root root 709 Dec 18 11:09 f1.txt\n-rwxr--r-- 1 root root 709 Dec 18 11:09 f2.txt\ndrw-r--r-- 2 root root  6 Dec 18 11:15 subdir\n[root@centos8 data]#ll -d dir\ndrwxr-xr-- 3 root root 48 Dec 18 11:15 dir\n[root@centos8 data]#chmod -R a+X dir\n[root@centos8 data]#ll -d dir\ndrwxr-xr-x 3 root root 48 Dec 18 11:15 dir\n[root@centos8 data]#ll dir\ntotal 8\n-rw-r--r-- 1 root root 709 Dec 18 11:09 f1.txt\n-rwxr-xr-x 1 root root 709 Dec 18 11:09 f2.txt\ndrwxr-xr-x 2 root root  6 Dec 18 11:15 subdir\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\nchmod u+wx,g-r,o=rx file\nchmod -R g+rwX /testdir\nchmod 600 file\n```\n\n\n\n**èŒƒä¾‹ï¼šé¢è¯•é¢˜**\n\n```bash\næ‰§è¡Œ cp /etc/issue /data/dir/ æ‰€éœ€è¦çš„æœ€å°æƒé™ï¼Ÿ\n/bin/cp éœ€è¦xæƒé™\n/etc/ éœ€è¦xæƒé™\n/etc/issue éœ€è¦ræƒé™\n/data éœ€è¦xæƒé™\n/data/dir éœ€è¦w,xæƒé™\n```\n\n\n\n### **æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™**\n\numask çš„å€¼å¯ä»¥ç”¨æ¥ä¿ç•™åœ¨åˆ›å»ºæ–‡ä»¶æƒé™\n\nå®ç°æ–¹å¼ï¼š\n\n- æ–°å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™: 666-umaskï¼Œå¦‚æœæ‰€å¾—ç»“æœæŸä½å­˜åœ¨æ‰§è¡Œï¼ˆå¥‡æ•°ï¼‰æƒé™ï¼Œåˆ™å°†å…¶æƒé™+1,å¶æ•°ä¸å˜\n- æ–°å»ºç›®å½•çš„é»˜è®¤æƒé™: 777-umask \n\néç‰¹æƒç”¨æˆ·umaské»˜è®¤æ˜¯ 002\n\nrootçš„umask é»˜è®¤æ˜¯ 022\n\næŸ¥çœ‹umask\n\n```bash\numask\n#æ¨¡å¼æ–¹å¼æ˜¾ç¤º\numask â€“S \n#è¾“å‡ºå¯è¢«è°ƒç”¨\numask â€“p\n```\n\nä¿®æ”¹umask\n\n```bash\numask #\n```\n\nèŒƒä¾‹\n\n```bash\numask 002\numask u=rw,g=r,o=\n```\n\næŒä¹…ä¿å­˜umask\n\n- å…¨å±€è®¾ç½®ï¼š /etc/bashrc \n- ç”¨æˆ·è®¾ç½®ï¼š~/.bashrc\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#umask\n0022\n[root@centos8 ~]#( umask 666; touch /data/f1.txt )\n[root@centos8 ~]#umask\n0022\n[root@centos8 ~]#ll /data/f1.txt\n---------- 1 root root 0 Mar 27 14:55 /data/f1.txt\n```\n\n\n\n**ç»ƒä¹ **\n\n1.å½“ç”¨æˆ·dockerå¯¹/testdir ç›®å½•æ— æ‰§è¡Œæƒé™æ—¶ï¼Œæ„å‘³ç€æ— æ³•åšå“ªäº›æ“ä½œï¼Ÿ\n\n```bash\n1.è¿›å…¥è¯¥ç›®å½•ï¼ˆcd /testdir å¤±è´¥ï¼‰  \n2.è®¿é—®ç›®å½•ä¸­çš„æ–‡ä»¶æˆ–å­ç›®å½•  \n3.æ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶  \n4.æ­£å¸¸æŒ‚è½½æˆ–è®¿é—®ä½œä¸º volume çš„è¯¥ç›®å½• \n```\n\n2.å½“ç”¨æˆ·mongodbå¯¹/testdir ç›®å½•æ— è¯»æƒé™æ—¶ï¼Œæ„å‘³ç€æ— æ³•åšå“ªäº›æ“ä½œï¼Ÿ\n\n```bash\n1.ä½¿ç”¨ ls /testdir æŸ¥çœ‹ç›®å½•å†…å®¹ã€‚  \n2.åˆ—å‡ºè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åå’Œå­ç›®å½•ã€‚  \n3.é€šè¿‡è·¯å¾„è®¿é—®ç›®å½•å†…çš„æ–‡ä»¶ï¼ˆå³ä½¿çŸ¥é“æ–‡ä»¶åï¼Œä¹Ÿå¯èƒ½å—é™ï¼‰ã€‚  \n4.åœ¨ç¨‹åºä¸­è¯»å–æˆ–æ‰«æè¯¥ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨ã€‚   \n```\n\n3.å½“ç”¨æˆ·redis å¯¹/testdir ç›®å½•æ— å†™æƒé™æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„åªè¯»æ–‡ä»¶file1æ˜¯å¦å¯ä¿®æ”¹å’Œåˆ é™¤ï¼Ÿ\n\n```bash\n1.ä¸èƒ½åˆ é™¤ file1 ï¼ˆå› ä¸ºåˆ é™¤æ–‡ä»¶éœ€è¦å¯¹ç›®å½• æœ‰å†™æƒé™ï¼‰\n2.ä¸èƒ½ä¿®æ”¹ file1çš„å†…å®¹ ï¼ˆå› ä¸ºä¿®æ”¹éœ€è¦å…ˆæ‰“å¼€æ–‡ä»¶ï¼Œé€šå¸¸ä¹Ÿéœ€è¦å¯¹æ–‡ä»¶æœ¬èº«æœ‰å†™æƒé™ï¼‰\n\nä½†å¦‚æœ file1 æœ¬èº«æ˜¯åªè¯»çš„ï¼ˆå¦‚åªæœ‰è¯»æƒé™ï¼‰ï¼Œå³ä½¿ç”¨æˆ·å¯¹ç›®å½•æœ‰å†™æƒé™ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹å®ƒçš„å†…å®¹ã€‚ ä½†æ˜¯å¯ä»¥åˆ é™¤ä»–\n```\n\n4.å½“ç”¨æˆ·zabbixå¯¹/testdir ç›®å½•æœ‰å†™å’Œæ‰§è¡Œæƒé™æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„åªè¯»æ–‡ä»¶file1æ˜¯å¦å¯ä¿®æ”¹å’Œåˆ é™¤ï¼Ÿ\n\n```bash\n1.å¯ä»¥åˆ é™¤ file1 ï¼ˆå› ä¸ºåˆ é™¤æ–‡ä»¶åªéœ€è¦å¯¹ç›®å½• æœ‰å†™æƒé™ï¼‰\n2.ä¸èƒ½ä¿®æ”¹ file1 çš„å†…å®¹ ï¼ˆå› ä¸ºæ–‡ä»¶æœ¬èº«æ˜¯åªè¯»çš„ï¼Œéœ€è¦å¯¹æ–‡ä»¶ æœ‰å†™æƒé™æ‰èƒ½ä¿®æ”¹ï¼‰\n```\n\n5.å¤åˆ¶/etc/fstabæ–‡ä»¶åˆ°/var/tmpä¸‹ï¼Œè®¾ç½®æ–‡ä»¶æ‰€æœ‰è€…ä¸ºtomcatè¯»å†™æƒé™ï¼Œæ‰€å±ç»„ä¸ºappsç»„æœ‰è¯»å†™æƒé™ï¼Œå…¶ä»–äººæ— æƒé™\n\n```bash\ncp /etc/fstab /var/tmp/\nchown tomcat:apps /var/tmp/fstab\nchmod 660 /var/tmp/fstab\n```\n\n- æ‰€æœ‰è€…ï¼ˆtomcatï¼‰ï¼šè¯»å†™æƒé™ `rw-` â†’ `6`\n- æ‰€å±ç»„ï¼ˆappsï¼‰ï¼šè¯»å†™æƒé™ `rw-` â†’ `6`\n- å…¶ä»–äººï¼šæ— æƒé™ `---` â†’ `0`\n\n6.è¯¯åˆ é™¤äº†ç”¨æˆ·gitçš„å®¶ç›®å½•ï¼Œè¯·é‡å»ºå¹¶æ¢å¤è¯¥ç”¨æˆ·å®¶ç›®å½•åŠç›¸åº”çš„æƒé™å±æ€§\n\n```bash\nuseradd git        # å¦‚æœç”¨æˆ·ä¸å­˜åœ¨\nmkdir -p /home/git\ncp -r /etc/skel/. /home/git/\nchown -R git:git /home/git\nchmod 700 /home/git\n```\n\n### **Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™**\n\nå‰é¢ä»‹ç»äº†ä¸‰ç§å¸¸è§çš„æƒé™ï¼šr, w, x è¿˜æœ‰ä¸‰ç§ç‰¹æ®Šæƒé™ï¼šSUID, SGID, Sticky\n\nç‰¹æ®Šæƒé™\n\n- SUID ä½œç”¨äºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸Š,ç”¨æˆ·å°†ç»§æ‰¿æ­¤ç¨‹åºæ‰€æœ‰è€…çš„æƒé™\n- SGID ä½œç”¨äºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸Š,ç”¨æˆ·å°†ç»§æ‰¿æ­¤ç¨‹åºæ‰€æœ‰ç»„çš„æƒé™ä½œäºäºç›®å½•ä¸Š, æ­¤ç›®å½•ä¸­æ–°å»ºçš„æ–‡ä»¶çš„æ‰€å±ç»„å°†è‡ªåŠ¨ä»æ­¤ç›®å½•ç»§æ‰¿\n- STICKY ä½œç”¨äºç›®å½•ä¸Š,æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶åªèƒ½ç”±æ‰€æœ‰è€…è‡ªå·²æ¥åˆ é™¤\n\n\n\n#### ç‰¹æ®Šæƒé™SUID\n\nå‰æï¼šè¿›ç¨‹æœ‰å±ä¸»å’Œå±ç»„ï¼›æ–‡ä»¶æœ‰å±ä¸»å’Œå±ç»„\n\n- ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹,å–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™\n- å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºå‘èµ·è€…,è¿›ç¨‹çš„å±ç»„ä¸ºå‘èµ·è€…æ‰€å±çš„ç»„\n- è¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶çš„æƒé™ï¼Œå–å†³äºè¿›ç¨‹çš„å‘èµ·è€…\n\näºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSUIDæƒé™åŠŸèƒ½ï¼š\n\n- ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼šå–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™\n- å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ä¸»\n- SUIDåªå¯¹äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆ\n- SUIDè®¾ç½®åœ¨ç›®å½•ä¸Šæ— æ„ä¹‰\n\nSUIDæƒé™è®¾å®šï¼š\n\n```bash\nchmod u+s FILE...\nchmod 4xxx FILE\nchmod u-s FILE...\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#ls -l /usr/bin/passwd\n-rwsr-xr-x. 1 root root 34928 May 11 2019 /usr/bin/passwd\n```\n\n\n\n#### ç‰¹æ®Šæƒé™SGID\n\näºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSGIDæƒé™åŠŸèƒ½ï¼š\n\n- ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼šå–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™\n- å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ç»„ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ç»„\n\nSGIDæƒé™è®¾å®šï¼š\n\n```bash\nchmod g+s FILE... \nchmod 2xxx FILE\nchmod g-s FILE...\n```\n\nç›®å½•ä¸Šçš„SGIDæƒé™åŠŸèƒ½ï¼š\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå…¶å±ç»„ä¸ºæ­¤ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¸€æ—¦æŸç›®å½•è¢«è®¾å®šäº†SGIDï¼Œåˆ™å¯¹æ­¤ç›®å½•æœ‰\n\nå†™æƒé™çš„ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶æ‰€å±çš„ç»„ä¸ºæ­¤ç›®å½•çš„å±ç»„ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºä¸€ä¸ªåä½œç›®å½•\n\nSGIDæƒé™è®¾å®šï¼š\n\n```bash\nchmod g+s DIR...\nchmod 2xxx DIR\nchmod g-s DIR...\n```\n\n#### **ç‰¹æ®Šæƒé™** **Sticky** ä½\n\nå…·æœ‰å†™æƒé™çš„ç›®å½•é€šå¸¸ç”¨æˆ·å¯ä»¥åˆ é™¤è¯¥ç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼Œæ— è®ºè¯¥æ–‡ä»¶çš„æƒé™æˆ–æ‹¥æœ‰æƒ\n\nåœ¨ç›®å½•è®¾ç½®Sticky ä½ï¼Œåªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–rootå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶\n\nsticky è®¾ç½®åœ¨æ–‡ä»¶ä¸Šæ— æ„ä¹‰\n\nStickyæƒé™è®¾å®šï¼š\n\n```bash\nchmod o+t DIR...\nchmod 1xxx DIR\nchmod o-t DIR...\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\n[root@centos8 ~]#ll -d /tmp\ndrwxrwxrwt. 15 root root 4096 Dec 12 20:16 /tmp\n```\n\n#### **ç‰¹æ®Šæƒé™æ•°å­—æ³•**\n\nSUID SGID STICKY\n\n```bash\n000 0\n001 1\n010 2\n011 3\n100 4\n101 5\n110 6\n111 7\n```\n\nèŒƒä¾‹ï¼š\n\n```bash\nchmod 4777 /tmp/a.txt\n```\n\næƒé™ä½æ˜ å°„\n\nSUID: user,å æ®å±ä¸»çš„æ‰§è¡Œæƒé™ä½\n\n sï¼šå±ä¸»æ‹¥æœ‰xæƒé™\n\n Sï¼šå±ä¸»æ²¡æœ‰xæƒé™\n\nSGID: group,å æ®å±ç»„çš„æ‰§è¡Œæƒé™ä½\n\n sï¼š groupæ‹¥æœ‰xæƒé™\n\n Sï¼šgroupæ²¡æœ‰xæƒé™ \n\nSticky: other,å æ®otherçš„æ‰§è¡Œæƒé™ä½\n\n tï¼šotheræ‹¥æœ‰xæƒé™\n\n Tï¼šotheræ²¡æœ‰xæƒé™\n\n### è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§\n\nè®¾ç½®æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§ï¼Œå¯ä»¥è®¿é—® root ç”¨æˆ·è¯¯æ“ä½œåˆ é™¤æˆ–ä¿®æ”¹æ–‡ä»¶\n\nä¸èƒ½åˆ é™¤ï¼Œæ”¹åï¼Œæ›´æ”¹\n\n```bash\nchattr +i file\n```\n\nåªèƒ½è¿½åŠ å†…å®¹ï¼Œä¸èƒ½åˆ é™¤ï¼Œæ”¹å\n\n```bash\nchattr +a file\n```\n\næ˜¾ç¤ºç‰¹å®šå±æ€§\n\n```bash\nlsattr\n```\n\nèŒƒä¾‹\n\n```bash\n[root@centos8 data]#chattr +i dir\n[root@centos8 data]#lsattr dir\n------------------ dir/fstab\n------------------ dir/f1.txt\n[root@centos8 data]#lsattr *\n------------------ dir/fstab\n------------------ dir/f1.txt\n------------------ f11.txt\n------------------ f22.txt\n[root@centos8 data]#ll\ntotal 8\ndrwxr-xr-x 2 root root 33 Dec 18 14:32 dir\n-rw-r--r-- 1 root root 719 Dec 18 14:30 f11.txt\n-rw-r--r-- 1 root root  6 Dec 18 14:30 f22.txt\n[root@centos8 data]#rm -rf dir\nrm: cannot remove 'dir/fstab': Operation not permitted\nrm: cannot remove 'dir/f1.txt': Operation not permitted\n[root@centos8 data]#lsattr \n------------------ ./f11.txt\n------------------ ./f22.txt\n----i------------- ./dir\n[root@centos8 data]#chattr -i dir\n[root@centos8 data]#lsattr \n------------------ ./f11.txt\n------------------ ./f22.txt\n------------------ ./dir\n```\n\n### è®¿é—®æ§åˆ¶åˆ—è¡¨ ACL\n\n#### ACLæƒé™åŠŸèƒ½\n\nACLï¼šAccess Control Listï¼Œå®ç°çµæ´»çš„æƒé™ç®¡ç†\n\né™¤äº†æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ‰€å±ç»„å’Œå…¶å®ƒäººï¼Œå¯ä»¥å¯¹æ›´å¤šçš„ç”¨æˆ·è®¾ç½®æƒé™\n\nCentOS7 é»˜è®¤åˆ›å»ºçš„xfså’Œext4æ–‡ä»¶ç³»ç»Ÿå…·æœ‰ACLåŠŸèƒ½\n\nCentOS7 ä¹‹å‰ç‰ˆæœ¬ï¼Œé»˜è®¤æ‰‹å·¥åˆ›å»ºçš„ext4æ–‡ä»¶ç³»ç»Ÿæ— ACLåŠŸèƒ½,éœ€æ‰‹åŠ¨å¢åŠ \n\n```bash\ntune2fs â€“o acl /dev/sdb1\nmount â€“o acl /dev/sdb1 /mnt/test\n```\n\nACLç”Ÿæ•ˆé¡ºåºï¼š\n\n```bash\næ‰€æœ‰è€…ï¼Œè‡ªå®šä¹‰ç”¨æˆ·ï¼Œæ‰€å±ç»„|è‡ªå®šä¹‰ç»„ï¼Œå…¶ä»–äºº\n```\n\n#### ACLç›¸å…³å‘½ä»¤\n\n```bash\nsetfacl å¯è®¾ç½®ACLæƒé™\ngetfacl å¯æŸ¥çœ‹è®¾ç½®çš„ACLæƒé™\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 data]#ll f1.txt\n-rw-r--r-- 1 root root 709 Dec 18 14:37 f1.txt\n[root@centos8 data]#setfacl -m u:wang:- f1.txt\n[root@centos8 data]#ll \ntotal 4\n-rw-r--r--+ 1 root root 709 Dec 18 14:37 f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:---\ngroup::r--\nmask::r--\nother::r--\n[root@centos8 data]#su wang\n[wang@centos8 data]$cat f1.txt\ncat: f1.txt: Permission denied\n[wang@centos8 data]$echo xx >> f1.txt\nbash: f1.txt: Permission denied\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002group::r--\nother::r--\n[root@centos8 data]#setfacl -m u:wang:0 f1.txt\n[root@centos8 data]#setfacl -m g:admins:w f1.txt\n[root@centos8 data]#ll f1.txt\n-rw-rw-r--+ 1 root root 718 Dec 18 14:44 f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:---\ngroup::r--\ngroup:admins:-w\u0002mask::rw\u0002other::r--\n[root@centos8 data]#id wang\nuid=1000(wang) gid=1000(wang) groups=1000(wang)\n[root@centos8 data]#id mage\nuid=1001(mage) gid=1001(mage) groups=1001(mage)\n[root@centos8 data]#su mage\n[mage@centos8 data]$cat f1.txt\n#\n# /etc/fstab\n# Created by anaconda on Wed Dec 11 11:11:16 2019\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk/'.\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.\n#\n# After editing this file, run 'systemctl daemon-reload' to update systemd\n# units generated from this file.\n#\nUUID=1b950ef9-7142-46bd-975c-c4ac1e0d47e8 /            xfs   \ndefaults    0 0\nUUID=667a4c81-8b4b-4a39-a111-b11cb6d09309 /boot          ext4  \ndefaults    1 2\nUUID=38d14714-c018-41d5-922c-49e415decbca /data          xfs   \ndefaults    0 0\nUUID=a0efb2bb-8227-4317-a79d-0a70d515046c swap          swap  \ndefaults    0 0\nmagedata\n[mage@centos8 data]$echo magedata2 >> f1.txt\nbash: f1.txt: Permission denied\n[mage@centos8 data]$exit\nexit\n[root@centos8 data]#gpasswd -a mage admins\nAdding user mage to group admins\n[root@centos8 data]#id mage\nuid=1001(mage) gid=1001(mage) groups=1001(mage),1002(admins)\n[root@centos8 data]#su mage\n[mage@centos8 data]$echo magedata3 >> f1.txt \n[mage@centos8 data]$cat f1.txt\ncat: f1.txt: Permission denied\n[mage@centos8 data]$exit\nexit\n[root@centos8 data]#su wang\n[wang@centos8 data]$cat f1.txt\ncat: f1.txt: Permission denied\n[wang@centos8 data]$echo wangdata >> f1.txt\nbash: f1.txt: Permission denied\n[wang@centos8 data]$exit\nexit\n[root@centos8 data]#groupmems -a wang -g admins\n[root@centos8 data]#id wang\nuid=1000(wang) gid=1000(wang) groups=1000(wang),1002(admins)\n[root@centos8 data]#su wang\n[wang@centos8 data]$getfacl f1.txt \n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:---\ngroup::r--\ngroup:admins:-w\u0002mask::rw\u0002other::r--\n[wang@centos8 data]$cat f1.txt\ncat: f1.txt: Permission denied\n[wang@centos8 data]$echo wangdata2 >> f1.txt\nbash: f1.txt: Permission denied\n```\n\n\n\nèŒƒä¾‹ï¼š\n\n```bash\nmount -o acl /directory\ngetfacl file |directory\nsetfacl -m u:wang:rwx file|directory\nsetfacl -m g:admins:rw file| directory\nsetfacl -x u:wang file |directory\n#æ¸…é™¤æ‰€æœ‰ACLæƒé™\nsetfacl -b file1 \n#å¤åˆ¶file1çš„aclæƒé™ç»™file2\ngetfacl file1 | setfacl --set-file=- file2\n```\n\n\n\n**mask æƒé™**\n\n- maskåªå½±å“é™¤æ‰€æœ‰è€…å’Œotherçš„ä¹‹å¤–çš„äººå’Œç»„çš„æœ€å¤§æƒé™\n- maskéœ€è¦ä¸ç”¨æˆ·çš„æƒé™è¿›è¡Œé€»è¾‘ä¸è¿ç®—åï¼Œæ‰èƒ½å˜æˆæœ‰é™çš„æƒé™(Effective Permission)\n- ç”¨æˆ·æˆ–ç»„çš„è®¾ç½®å¿…é¡»å­˜åœ¨äºmaskæƒé™è®¾å®šèŒƒå›´å†…æ‰ä¼šç”Ÿæ•ˆ\n\nèŒƒä¾‹ï¼š\n\n```bash\nsetfacl -m mask::rx file\n```\n\nèŒƒä¾‹:\n\n```bash\n[root@centos8 data]#ll f1.txt\n-rw-rw-r--+ 1 root root 728 Dec 18 14:51 f1.txt\n[root@centos8 data]#chmod g=r f1.txt\n[root@centos8 data]#ll f1.txt\n-rw-r--r--+ 1 root root 728 Dec 18 14:51 f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:---\ngroup::r--\ngroup:admins:-w- #effective:---\nmask::r--\nother::r--\n[root@centos8 data]#setfacl -m mask::rw f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:---\ngroup::r--\ngroup:admins:-w\u0002mask::rw\u0002other::r--\n[root@centos8 data]#setfacl -m u:wang:rwx f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:rwx\ngroup::r--\ngroup:admins:-w\u0002mask::rwx\nother::r--\n[root@centos8 data]#setfacl -m mask::rw f1.txt\n[root@centos8 data]#getfacl f1.txt\n# file: f1.txt\n# owner: root\n# group: root\nuser::rw\u0002user:wang:rwx #effective:rw\u0002group::r--\ngroup:admins:-w\u0002mask::rw\u0002other::r--\n```\n\n--seté€‰é¡¹ä¼šæŠŠåŸæœ‰çš„ACLé¡¹éƒ½åˆ é™¤ï¼Œç”¨æ–°çš„æ›¿ä»£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸€å®šè¦åŒ…å«UGOçš„è®¾ç½®ï¼Œä¸èƒ½è±¡-mä¸€æ ·åªæ˜¯æ·»åŠ ACLå°±å¯ä»¥\n\nèŒƒä¾‹ï¼š\n\n```bash\nsetfacl --set u::rw,u:wang:rw,g::r,o::- file1\n```\n\n<div class=\"tbsm\" style=\"margin-top:54px;\">\n<div class=\"tbsm-top\"><span><svg t=\"1674654360507\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"987\" data-spm-anchor-id=\"a313x.7781069.0.i0\" width=\"35\" height=\"35\"><path d=\"M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z\" fill=\"#66EEFF\" p-id=\"988\"></path><path d=\"M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z\" fill=\"#C2F8FF\" p-id=\"989\"></path></svg></span><span style=\"font-size:30px;\"> ç‰¹åˆ«å£°æ˜</span></div>\n<div class=\"tbsm-wz\">åƒå±¹åšå®¢æ——ä¸‹çš„æ‰€æœ‰æ–‡ç« ï¼Œæ˜¯é€šè¿‡æœ¬äººè¯¾å ‚å­¦ä¹ å’Œè¯¾å¤–è‡ªå­¦æ‰€ç²¾å¿ƒæ•´ç†çš„çŸ¥è¯†å·¨è‘—<br/>éš¾å…ä¼šæœ‰å‡ºé”™çš„åœ°æ–¹<br/>å¦‚æœç»†å¿ƒçš„ä½ å‘ç°äº†å°å¤±è¯¯ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œæˆ–è€…ç§ä¿¡æˆ‘ï¼<br />éå¸¸æ„Ÿè°¢å¤§å®¶çš„çƒ­çƒˆæ”¯æŒï¼</div>\n</div>\n\n","tags":["è¿ç»´ç¬”è®°"],"categories":["è¿ç»´"]}]